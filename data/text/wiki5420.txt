perl высокоуровневый динамический язык общего назначения созданный ларри уоллом лингвистом по образованию название языка официально как практический язык для извлечения данных составления отчётов шутку как патологически эклектичный перечислитель мусора разработчики языка не считают его название акронимом первоначально название состояло из пяти символов таком виде точности совпадало английским словом жемчужина но затем стало известно что такой язык существует см букву убрали символом языка perl является верблюд не слишком красивое но очень выносливое животное способное выполнять тяжёлую работу основной особенностью языка считаются его богатые возможности для работы текстом том числе работа регулярными выражениями встроенная синтаксис перл унаследовал много свойств от языков си awk скриптовых языков командных оболочек unix perl также знаменит огромной коллекцией дополнительных модулей cpan находящейся по адресу http www cpan org обзор perl язык общего назначения который был первоначально создан для манипуляций текстом но на данный момент используется для выполнения широкого спектра задач включая системное веб разработку сетевое игры биоинформатику разработку графических интерфейсов язык можно скорее как практичный лёгкость использовании эффективность полнота чем красивый элегантность главными достоинствами языка являются поддержка различных парадигм процедурный объектно ориентированный функциональный стили контроль за памятью без сборщика мусора основанного на циклах встроенная поддержка обработки текста также большая коллекция модулей сторонних разработчиков согласно ларри уоллу perl есть два девиза первый есть больше одного способа это сделать известный также под аббревиатурой tmtowtdi второй слоган простые вещи должны быть простыми сложные вещи должны быть возможными особенности общая структура perl общих чертах ведёт своё начало от языка си perl процедурный по своей природе имеет переменные выражения присваивания блоки кода отделяемые фигурными скобками управляющие структуры функции perl также заимствует ряд свойств из языков командных оболочек unix все переменные маркируются ведущими знаками которые точно выражают тип данных переменной этом контексте например скаляр массив хеш важно что эти знаки позволяют переменным быть строках perl обладает множеством встроенных функций которые обеспечивают инструментарий часто используемый для оболочки например сортировку или вызов системных служб perl заимствует массивы из лиспа регулярные выражения из awk sed из awk также позаимствованы хеши ассоциативные массивы регулярные выражения облегчают выполнение многих задач по парсингу обработке текста манипуляций данными perl добавил поддержку сложных типов данных первоклассных функций замыкание как значение объектную модель последнюю входят ссылки пакеты выполнение методов от класса переменные лексическим объявлением области видимости также директивы компилятора например strict главнейшим представленным perl стала возможность помещать код пакеты качестве модулей для повторного использования ларри уолл позже заметил что весь замысел модульной системы perl сводился поощрению роста культуры perl не строчек кода все версии perl выполняют автоматическую типизацию данных автоматический контроль над памятью интерпретатор знает тип запросы памяти каждого объекта программы он распределяет освобождает память производя подсчёт ссылок перевод одного типа данных другой например числа строку происходит автоматически во время исполнения невозможные для выполнения переводы типов данных приводят фатальной ошибке работа windows пользователи microsoft windows обычно используют дистрибутивы уже бинарными файлами такие как activeperl или так как компиляция perl из исходных кодов этой ос не самая простая задача задачу может облегчить cygwin история первые версии ларри уолл начал разработку perl году когда работал программистом unisys версия была выпущена анонсирована новостной группе comp sources misc декабря года как замена для awk sed perl был выпущен году основным нововведением нём был переработанный механизм регулярных выражений perl выпущенный году получил возможность обрабатывать потоки двоичных данных изначально единственной документацией для perl была единственная огромной длины man страница году была выпущена книга известная многим программистам как верблюжья книга из за изображения на обложке которая де факто стала стандартом языка то же самое время версия языка была поднята до не столько чтобы указать на значительные изменения сколько чтобы обозначить что эта версия языка документирована книгой ранний perl perl прошёл через серию релизов остановившись на perl году этот момент ларри уолл забросил perl начал работу над perl разработка perl была начата году то же время был создан список рассылки perl porters для координации работы над портированием perl на различные платформы он до сих пор остаётся основным форумом по разработке обслуживанию портированию perl perl был выпущен октября года он включал себя полностью переписанный интерпретатор также много новых языковых возможностей таких как объекты ссылки локальные переменные my var_name модули особенно важной частью были модули так как они предоставили механизм расширения языка без модифицирования интерпретатора это позволило стабилизировать интерпретатор но при этом дало возможность обычным perl программистам добавлять язык новые возможности perl находится активной разработке по сей день perl был выпущен марта года perl увидел свет февраля года новой поддержкой прототипов это позволило авторам модулей создавать функции которые вели себя так же как встроенные функции perl версия perl появилась июня года устранила обнаружившиеся проблемы безопасностью одно из важнейших событий истории perl случилось за пределами собственно языка было следствием поддержки модулей октября года начала свою работу cpan всеобъемлющая сеть архивов perl которая стала репозиторием модулей perl также исходного кода самого языка на данный момент сеть насчитывает более модулей созданных более чем программистами perl был выпущен мая года содержал кроме всего прочего пакет universal который давал языку основной объект от которого автоматически происходили все классы была также включена возможность запрашивать версию модулей дополнение этому perl стал поддерживать microsoft windows также ряд других операционных систем perl увидел свет июня года этот релиз включал себя несколько улучшений процессора регулярных выражений новые перехваты бэкенд помощью модулей оператор кавычек qr для регулярных выражений большой выбор других новых модулей также поддержку ряда операционных систем частности beos по наше время perl был выпущен марта года главные изменения включали поддержку битных систем представление строк стандарте юникод поддержку больших файлов файлы больше ключевое слово our во время разработки perl было принято решение изменить схему наименования версий на более близкую другим проектам открытым исходным кодом за версией следовала версия согласно плану версиям разработке должны были присваиваться нечётные номера стабильным версиям чётные году ларри уолл выступил призывом сообществу активно обсуждать предложения следующей версии perl результатом этого обсуждения стал rfc запрос комментариев которые были использованы разработке perl году была начата работа над окончательным документом подводящим итог предложениям созданию нового поколения perl результат был представлен не виде формального документа качестве сводки всех rfc этому времени perl существовал исключительно виде описания языка perl был впервые выпущен июля года этого времени получал ежегодное обновление последняя версия perl под номером увидела свет декабря года perl улучшил поддержку юникода добавил новую реализацию ввода вывода добавил поддержку многопоточности увеличил числовую точность добавил несколько новых модулей году началась работа над синопсисом synopsis первоначально задуманном как ряд документов подводящих итоги окончательного документа упоминавшегося выше однако постепенно этот ряд документов стал спецификацией perl феврале года отриус тан начала работу над интерпретатором perl написанном на haskell это было первой настоящей попыткой воплотить perl реальность эта попытка заглохла году декабря года день летней годовщины perl была выпущена версия perl эта версия содержала себе ряд заметных нововведений приближающих её perl одними из таких нововведений стали новые операторы switch названных given when обновление регулярных выражений также умный оператор совпадения примерно это же время всерьёз началась разработка новой реализации perl известной как разработанной связке виртуальной машиной parrot ноября года rakudo perl регулярно обновляется каждый месяц является на данный момент самой полной реализацией perl значительное изменение процесса разработки perl произошло после появления perl сообщество разработчиков перешло на ежемесячный цикл выпусков планированием даты выпуска на три месяца вперёд апреля года perl был представлен общественности выдающиеся нововведения включают себя поддержку нового синтаксиса package name version оператор yada yada служащего для маркировки кода заполнителя который ещё не реализован полное решение проблемы года перегрузку операторов регулярных выражений поддержку dtrace фреймворка динамической трассировки также полную поддержку стандарта unicode сентября года был выпущен perl января perl эти выпуски содержат обновление модулей также некоторые изменения документации версия выпущена июня последняя версия этой ветви выпущена ноября мая выпущен perl поддержка json стала встроенной начиная версии последняя версия этой ветви выпущена марта мая выпущен perl значимым новшеством является возможность указать нужную версию perl которую надо эмулировать позволяя пользователям обновить perl но сохранить старых скриптов которые иначе стали бы несовместимыми новой версией ядро perl поддерживает unicode мая выпущен perl значимые нововведения включают новые зацепки dtrace лексические функции увеличение числа включенных ядро функций пересмотр реализации хешей из соображений безопасности поддержка unicode версия вышла мая апреля было объявлено выходе версии мая вышла версия мая года вышла очередная стабильная версия за номером сопутствующие решения некоторые наблюдатели приписывают выходу perl запуск движения modern perl частности эта фраза описывает стиль разработки подразумевающий использование cpan использование преимуществ последних разработок на языке также высокому качеству кода конце запущены несколько проектов по альтернативной реализации perl perl in perl rakudo perl team moe стивен литл друзьями perl team under reini urban также gperl goccy perl года идёт разработка новой версии языка отличие от предыдущих версий разработчики планируют создать чётко определённый стандарт языка настоящее время существуют компиляторы perl но продолжается дальнейшее обсуждение новых правил синтаксис языка perl синтаксис perl имеет много общего синтаксисом языков си awk sed bourne shell первая строка исходного кода может начинаться путь perl ключи что указывает системе путь интерпретатору perl для выполнения программы unix системах выполнения их на веб сервере см также шебанг unix пример программы простейшая программа hello world выглядит следующим образом usr bin perl print hello world либо для cgi usr bin perl print content type text html print hello world либо используя один из post modern web framework use mojolicious lite get text hello world app start либо используя psgi спецификацию my app sub return content type text plain hello world дозапись строку print вот так можно напечатать число гугол print типы данных основные типы данных скаляр массив хеш таблица функция указание на файл запись таблицы символов переменные разных типов отличаются знаком который стоит перед именем переменной тип символ пример описание скаляр foo единичное значение может быть числом строкой указанием на файл также ссылкой массив foo упорядоченная коллекция скаляров хеш таблица foo коллекция из пар строка скаляр строки называются ключами скаляры значениями синоним ассоциативный массив файловый дескриптор foo или foo представление открытого файла или другой цели открытой для чтения или записи функция foo отрезок кода который принимает аргументы исполняет действия возвращает значения запись таблицы символов foo запись таблицы символов для всех типов именем foo скаляр скалярные переменные используются для хранения одиночных значений они могут содержать числа строки ссылки на другие объекты перед именем скалярной переменной необходимо ставить знак доллара тип скалярной переменной не фиксирован отличие от например языка си определяется динамически зависимости от контекста например число используем как число string теперь как строку ref ref является указателем на ref содержит значение строковые данные должны быть помещены кавычки perl использует два вида кавычек одиночные двойные помещение строки двойные кавычки позволяет автоматически заменить встречающиеся имена переменных на их значения заключение строк одиночные кавычки предотвращает такое поведение пример интерполяции переменных двойных кавычках pi var значение pi pi print var значение pi pi var значение pi pi print var значение pi для включения двойных кавычек строку которая была помещена двойные кавычки следует использовать для включения одинарных кавычек строку из одинарных кавычек для удобства работы со строками содержащими много знаков кавычек внутри perl позволяет использовать альтернативные способы закавычивания альтернативная форма использует любую пару знаков помещённых после буквы имитирует поведение одинарных кавычек или qq имитирует поведение двойных кавычек пример использования альтернативных кавычек pi link pi print link pi link qq pi print link ещё один тип кавычек perl обратные кавычки них помещаются программы операционной системы вывод которых может быть передан интерпретатору perl выполнение программ всегда заканчиваются символом новой строки пример использования обратных кавычек для исполнения команд unix space du usr local bin print space usr local bin sysuptime uptime print sysuptime up day user load averages массив массив является упорядоченным списком скаляров каждый элемент массива имеет порядковый индекс помощью которого нему можно получить доступ нумерация элементов начинается нуля то есть первый элемент списка имеет индекс перед именем переменной массива необходимо ставить знак для доступа определённому элементу массива использовать знак так как отдельный элемент массива является скаляром многомерные массивы можно смоделировать помещая список ссылки на другие списки array записали массив array четыре элемента print array напечатать третий элемент print array напечатать третий четвёртый элемент здесь используется так как результат операции среза массива тоже является массивом хеш таблица хеш таблица представляет собой ассоциативный массив позволяющий ассоциировать строку называемую ключом со скаляром значение строка называется ключом скаляр хеш таблице значением перед именем переменной списка необходимо ставить знак процента для доступа определенному элементу массива необходимо ставить знак хеш таблицу можно массивом или списком состоящим из неограниченного числа ключ значение hash cat kitten здесь это так называемая длинная запятая этом примере dog puppy по функции полностью аналогичная обыкновенной за исключением cow calf того что литералы слева неявно заключаются кавычки print hash cat напечатает kitten print join keys hash вывод всех ключей напечатает cat dog cow print join values hash вывод всех значений напечатает kitten puppy calf print join hash напечатает cat kitten cow calf dog puppy так как списковом контексте хэш автоматически разворачивается список ключ значение так как ключи хэше не сортируются пары каждый раз будут выводиться произвольном порядке функция функция представляет собой фрагмент исполняемого кода функция всегда возвращает какое либо значение если возвращаемое значение явно не указано оператором return возвращается последнее вычисленное значение если функции используется return без параметров то зависимости от контекста вызова функции возвращается неопределённое значение undef пустой список или вообще ничего sub printtwo print sub three three print напечатает printtwo запишем скаляр ссылку на функцию через эту ссылку она будет вызвана следующей строке print напечатает коде функции как значение возвращаемое функцией printtwo print printtwo то же самое константа константа представляет собой неизменяемое значение константа не является встроенным типом языка эмулируется при помощи функций предпочтительно задавать константы помощью стандартного модуля constant чтобы будущем не зависеть от возможных изменений реализации констант использование use constant my print my запись таблицы символов запись таблицы символов typeglob специальный тип котором хранятся ссылки на все переменные других типов таким названием также на символы которые часто использует для хранения файловый дескриптор представляющих собой указатель на файл устройство или pipe канал открытые для записи чтения или для записи чтения использование readline stdin читаем одну строку из дескриптора stdin стандартный поток ввода скалярный контекст values читаем все строчки из некоторого открытого связанного дескриптором file файла списковый контекст print stdout печатаем stdout стандартный поток вывода более информативный пример котором typeglob используется для передачи файлового дескриптора функцию my file file txt имя файла который читаем open fh file открываем файл my text fh передаем файловый дескриптор функцию print text close fh обязательно закрываем файловый дескриптор sub my fh shift получаем файловый дескриптор my text join построчно читаем из файлового дескриптора строку помещаем переменную text return text последних версиях perl появилась возможность хранить файловые дескрипторы скалярах новых программах предпочтительно пользоваться именно этим способом также таблицы символов используются для связи двух имён переменной одним значением памяти создавая синонимы которые могут быть использованы для доступа модификации значения точно также как оригинальное имя эта возможность является основой системы загружаемых модулей классов объектов perl классы объекты объект perl представляет собой просто ссылку связанную определённым классом пакетом для связи используется функция bless подпрограммы такого связанного пакета являются методами получают ссылку качестве первого аргумента специальный синтаксис для конструкторов отсутствует используется подпрограмма пакета возвращающая ссылку связанную этим пакетом также существуют множество расширений для системы ооп позволяющих менять синтаксис использовать синтаксический сахар числе которых стоит назвать cpan модуль moose его облегчённую версию moo moose используется многими проектами крупными компаниями такими как bbc или cisco регулярные выражения важной частью perl являются регулярные выражения благодаря этому perl хорошо подходит для обработки текстов бо льшая часть работы регулярными выражениями производится при помощи операторов оператор используется для проверки на совпадение простейшем случае результат выражения abc будет истинным тогда только тогда когда строка будет соответствовать регулярному выражению abc например пример значение строка содержит под строку abc начальная буква оператора при использовании может быть опущена строка содержит букву затем от одного до трёх любых символов кроме символа перевода строки затем букву строка строго равна perl или pugs без учёта регистра так же вместо регулярное выражение окружено поиск замена выполняются при помощи оператора конструкция abc def заменит первое вхождение регулярного выражения abc на строку def пример значение все вхождения на что указывает флаг global подстроки abc будут заменены на def первое вхождение буквы затем от одного до трех любых символов кроме символа перевода строки затем буквы будет заменено на эти символы между окружённые например syntactic станет synt cti здесь показан пример использования модификатора указывающего на то что вместо строки замены будет написан код результат выполнения которого надо использовать все вхождения perl или pugs любом регистре будут заменены на perl pugs соответственно появлением динамических регулярных выражений код perl конструкции для включения регулярное выражение исполняемого кода perl код perl возможности по поиску замене стали практически безграничными примеру стал возможен поиск конструкций произвольного уровня вложенности регулярные выражения perl настолько популярны что они включены напрямую другие языки такие как php javascript также существуют подключаемые библиотеки реализующие использование выражений компилируемых языках программы из одной строки интересной часто используемой возможностью perl являются так называемые однострочники программы из одной строки обычно задаваемые прямо строке вызова интерпретатора помощью ключа эта программа напечатает простые числа perl wle print while этот пример напечатает только уникальные строки файла file ключ автоматически заворачивает строку обработки цикл который проходит по всем строкам файлах указанных после текста программы perl ne print file примечание для запуска предыдущей команды под windows замените ней апострофы на двойные кавычки этих примерах perl напоминает своей краткостью непонятностью первого взгляда язык также одним из подобных примеров является вызвавшая большой резонанс программа на самом деле являющаяся патчем бармина замаскированной командой рекурсивного удаления всех файлов echo test test test perl echo test test test выполнение этой команды не влияет на работу добавлено скорее всего для усыпления бдительности то что происходит остальном коде совсем не очевидно из за преднамеренно запутанного написания данной строчке записано всего три последовательно выполняемых команды запишем команду следующим образом первая конструкция анализирует переменную код возврата предыдущей команды так как перед выполнением этой конструкции дочерних процессов не создавалось будет содержать выполнена будет вторая ветка результате содержимое принимает вид system rm rf третья же команда дважды как инструктирует флаг ee вычисляет содержимое аккумулятора вышеуказанную деструктивную команду пытается заменить пустую строку аккумуляторе на результат вычисления языки оболочки со схожими технологиями perl далеко не единственный язык дающий богатые возможности обработке текста языки рефал icon снобол предоставляют возможность более полно использовать метод сопоставления образцом частным случаем которого являются регулярные выражения существует также полноценная командная оболочка unix использующая качестве основы язык perl называется она psh даёт возможность смешивать команды обычной оболочки самого perl поэзия perl на perl можно даже писать стихотворения одно из таких стихотворений под названием black perl чёрная жемчужина или чёрный перл было упомянуто ларри уоллом первоапрельском письме usenet оно было написано изначально для perl по словам самого ларри он испытал моральное удовлетворение когда стихотворение не прошло синтаксический анализатор perl beforehead close door each window exit wait until time open spellbook study read scan select tell us write it print the hex whole each watches reverse its length write again kill spiders pop them chop split kill them unlink arms shift wait listen listening wait sort the flock then warn the goats kill the sheep kill them dump qualms shift moralities values aside each one die sheep die to reverse the system you accept reject respect next step kill next sacrifice each sacrifice wait redo ritual until all the spirits are pleased do it as they say do it everyone must participate in forbidden return last victim package body exit crypt time times half time close it select quickly warn your next victim afterwords tell nobody wait wait until time wait until next year next decade sleep sleep die yourself die at last редакторы специально для perl разработчиков на языке perl использованием интерфейсной библиотеки wxwidgets написан такой открытый продукт как сокращение от perl application development and refactoring environment среда разработки рефакторинга перл приложений поддержка perl включена такую универсальную ide как activestate komodo её открытую версию komodo edit для eclipse поддержка perl реализована виде пакет расширений epic обе этих среды числе прочего включают визуальный отладчик intellij idea прочие продукты jetbrains поддерживают perl помощью плагина открытым исходным кодом camelcade поддержка перла том или ином виде имеется большинстве текстовых редакторов для программистов таких как vim emacs scite gedit geany jedit sublime text или предназначенные для windows notepad pspad также такие shareware продукты как ultraedit uestudio от idm computer solutions inc для mac os таким редактором может служить textmate определённой популярностью среди пользователей windows пользуется также perl editor входящий линейку shareware редакторов для программистов от dzsoft был достаточно известен бесплатный редактор mastak absolute perl но его разработка поддержка прекращены последняя версия датируется сентября года ещё один отечественный бесплатный perl редактор для windows это perl express последняя версия русским интерфейсом от декабря английским от декабря среди других сред разработки для perl следует отметить shareware ide perlbuilder отечественный редактор collie perl shell см также python php ссылки официальный сайт www cpan org cpan архив библиотек для языка perl perldoc официальная документация perl pragmatic perl электронный журнал современном perl на русском литература примечания категория свободные компиляторы интерпретаторы