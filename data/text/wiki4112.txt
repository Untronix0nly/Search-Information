ip досл межсетевой протокол протокол сетевого уровня стека tcp ip именно ip стал тем протоколом который объединил отдельные компьютерные сети во всемирную сеть интернет неотъемлемой частью протокола является адресация сети см ip адрес свойства ip объединяет сегменты сети единую сеть обеспечивая доставку пакетов данных между любыми узлами сети через произвольное число промежуточных узлов маршрутизаторов он как протокол сетевого уровня по сетевой модели osi ip не гарантирует надёжной доставки пакета до адресата частности пакеты могут прийти не том порядке котором были отправлены приходят две копии одного пакета оказаться повреждёнными обычно повреждённые пакеты уничтожаются или не прийти вовсе гарантию безошибочной доставки пакетов дают некоторые протоколы более высокого уровня транспортного уровня сетевой модели osi например tcp которые используют ip качестве транспорта фрагментация ip пакетов при доставке ip пакета он проходит через разные каналы доставки возможно возникновение ситуации когда размер пакета превысит возможности узла системы связи этом случае протокол предусматривает возможность дробления пакета на уровне ip процессе доставки соответственно конечному получателю пакет придет виде нескольких пакетов которые необходимо собрать один перед дальнейшим анализом возможность дробления пакета последующей сборкой называется ip фрагментацией протоколе предусмотрена возможность запрещения фрагментации конкретного пакета если такой пакет нельзя передать через сегмент связи целиком то он уничтожается отправителю направляется icmp сообщение проблеме версия современной сети интернет используется ip четвёртой версии также известный как ipv протоколе ip этой версии каждому узлу сети ставится соответствие ip адрес длиной октета байта при этом компьютеры подсетях объединяются общими начальными битами адреса количество этих бит общее для данной подсети называется маской подсети ранее использовалось деление пространства адресов по классам класс сети определялся диапазоном значений старшего октета определял число адресуемых узлов данной сети сейчас используется бесклассовая адресация версия настоящее время вводится эксплуатацию шестая версия протокола ipv которая позволяет адресовать значительно большее количество узлов чем ipv эта версия отличается повышенной разрядностью адреса встроенной возможностью шифрования некоторыми другими особенностями переход ipv на ipv связан трудоёмкой работой операторов связи производителей программного обеспечения не может быть выполнен одномоментно осени года интернете присутствовало более сетей работающих по протоколу ipv для сравнения середине года адресном пространстве ipv присутствовало более тысяч сетей но ipv сети гораздо более крупные нежели ipv пакет ip пакет форматированный блок информации передаваемый по компьютерной сети структура которого определена протоколом ip отличие от них соединения компьютерных сетей которые не поддерживают ip пакеты такие как традиционные соединения типа точка точка просто передают данные виде байтов символов или битов при использовании пакетного форматирования сеть может передавать длинные сообщения более надежно эффективно версия ipv октет версия ihl differentiated services code point ecn длина пакета идентификатор флаги смещение фрагмента время жизни ttl протокол контрольная сумма заголовка ip адрес отправителя ip адрес получателя параметры от до битных слов данные версия для ipv значение поля должно быть равно ihl internet header length длина заголовка ip пакета битных словах dword именно это поле указывает на начало блока данных полезный груз пакете минимальное корректное значение для этого поля равно длина пакета total length длина пакета октетах включая заголовок данные минимальное корректное значение для этого поля равно максимальное идентификатор identification значение назначаемое отправителем пакета предназначенное для определения корректной фрагментов при сборке пакета для пакета все фрагменты имеют одинаковый идентификатор бита флагов первый бит должен быть всегда равен нулю второй бит df don fragment определяет возможность фрагментации пакета третий бит mf more fragments показывает не является ли этот пакет последним цепочке пакетов смещение фрагмента fragment offset значение определяющее позицию фрагмента потоке данных смещение задается количеством восьмибайтовых блоков поэтому это значение требует умножения на для перевода байты время жизни ttl число маршрутизаторов которые может пройти этот пакет при прохождении маршрутизатора это число уменьшается на единицу если значение этого поля равно нулю то пакет должен быть отброшен отправителю пакета может быть послано сообщение time exceeded icmp тип код протокол идентификатор интернет протокола следующего уровня указывает данные какого протокола содержит пакет например tcp udp или icmp см iana protocol numbers rfc ipv называется next header контрольная сумма заголовка header checksum вычисляется соответствии rfc версия ipv позиция октетах позиция битах версия класс трафика метка потока длина полезной нагрузки след заголовок число переходов ip адрес отправителя ip адрес получателя версия для ipv значение поля должно быть равно класс трафика определяет приоритет трафика qos класс обслуживания метка потока уникальное число одинаковое для однородного потока пакетов длина полезной нагрузки длина данных октетах заголовок ip пакета не учитывается следующий заголовок задаёт тип расширенного заголовка который идёт следующим последнем расширенном заголовке поле next header задаёт тип транспортного протокола tcp udp определяет следующий уровень число переходов максимальное число маршрутизаторов которые может пройти пакет при прохождении маршрутизатора это значение уменьшается на единицу по достижении нуля пакет отбрасывается см также ipsec ipv ipv ipv ip адрес ip утилита unix ping localhost loopback замыкание на себя ip посредством почтовых голубей множественная адресация ссылки rfc спецификация ip rfc выделение адресов для частных сетей rfc специальные диапазоны адресов ipv категория протоколы сетевого уровня