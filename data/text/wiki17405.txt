препроцессор это компьютерная программа принимающая данные на входе выдающая данные предназначенные для входа другой программы например компилятора данных на выходе препроцессора говорят что они находятся форме пригодной для обработки последующими программами компилятор результат вид обработки зависят от вида препроцессора так некоторые препроцессоры могут только выполнить простую текстовую подстановку другие способны по возможностям сравниться языками наиболее частый случай использования препроцессора обработка исходного кода перед передачей его на следующий шаг компиляции языки система компьютерной вёрстки tex используют препроцессоры значительно расширяющие их возможности некоторых языках этап компиляции трансляции получили название препроцессинга лексические препроцессоры лексическими препроцессорами называют низкоуровневые препроцессоры потому что они требуют только лексического анализа то есть они обрабатывают только исходный текст перед парсингом выполняя простую замену лексем специальных символов заданными символов соответствии правилами установленными пользователями обычно они выполняют замену макросов текстовые вставки из других файлов также условную компиляцию или подключение файлов препроцессинг наиболее широкое распространение среди лексических препроцессоров получил препроцессор языка си используемый языках си его потомке препроцессор удаляет из кода комментарии преобразует код соответствии макросами выполняет иные директивы начинающиеся символа такие как include define разнообразные директивы типа pragma язык php php чаще всего используется при обработке веб страниц текст страницы считывается выдается неизменном виде единственным исключением является наличие тексте страницы инструкций php ограниченных начале конце пример текста страницы содержащей текущее время текущее время текущее время препроцессор php заменит выделенную строку на текущее время текущее время сейчас часов минут секунд прочие лексические препроцессоры прочие лексические препроцессоры поддерживают универсальный язык обычно применяемый кросс платформенных системах сборки таких как autoconf gema обработчик макросов открытым исходным кодом работа которого основана на контекстных шаблонах синтаксические препроцессоры синтаксические препроцессоры впервые были представлены семействе языков лисп их роль заключалась обработке синтаксических деревьев согласно набору правил определённых пользователем для некоторых языков правила писались на том же самом языке что сама программа симметрия компиляции примерами могут служить лисп ocaml некоторых языках используется полностью независимый язык для описания преобразований например xslt препроцессор для xml или его аналог со статическими типами cduce синтаксические препроцессоры обычно используются для уточнения синтаксиса языка расширения языка путём добавления новых примитивов или встраиванием предметно языка основной язык модификация синтаксиса хороший пример модификации синтаксиса существование двух различных вариантов синтаксиса языке objective caml программы можно писать используя обычный синтаксис или исправленный синтаксис при этом выбор зависит от желания программиста аналогично набор программ написанных на ocaml имеет возможность настройки синтаксиса языка путём добавления новых операторов расширение языка отличными примерами расширения языка при помощи макросов может служить их использование семействе языков лисп то время как эти языки сами по себе имеют простые ядра ориентированные на динамические типы стандартные поставки схема императивы common lisp объектно ориентированное ориентированы на статические типы почти все эти свойства реализованы синтаксическими препроцессорами хотя это несёт себе отпечаток этапа компиляции расширения макросами управляемой компилятором лисп это все ещё может считаться формой препроцессорной обработки так как это происходит перед остальными этапами компиляции аналогично типобезопасные регулярные выражения или генерация кода могут быть добавлены синтаксис семантику ocaml при помощи макросов например микронити также известные как сопрограммы или волокна монады или прозрачная обработка xml язык одной из необычных особенностей семейства языков лисп является возможность использования макросов для создания встроенного предметно языка обычно большом количестве проектов написанных на языке лисп модуль может быть написан на множестве подобных миниязыков то есть один может использовать sql диалект языка лисп другой может быть написан на диалекте ориентированном на графический интерфейс пользователя или вывод на принтер так далее стандартная библиотека common lisp содержит пример такого уровня синтаксической абстракции виде макроса loop который реализует миниязыки подобные языку алгол для описания комплексной итерации при сохранении возможности использовать стандартные операторы лисп препроцессор язык metaocaml обеспечивает схожие возможности для внешнего предметно языка этот препроцессор получая описание семантики языка так называемая интерпретация комбинируя интерпретацию во время компиляции генерации кода передаёт это определение компилятору языка ocaml тот на основе этого языка создаёт байт код или естественный код макропроцессор общего назначения препроцессоры выполняя только один из этапов трансляции ориентированы на задачу фрагментарной обработки данных например компиляция языка си сходные ними программы называемые таком случае также могут предназначаться для общих целей то есть перед ними не ставится цель реализации специфического использования или языка они разрабатываются для использования широкого круга задач обработки данных макропроцессор вероятно наиболее известный пример подобного макропроцесора общего назначения примеры применение препроцессора си для препроцессинга javascript кода применение см пример статье или препроцессора си качестве движка шаблонов для генерации html imake от interface make использует препроцессор си применялся проекте window system до перехода на automake grompp макропроцессор для файлов моделей проекта gromacs свободные программы открытым кодом для решения проблем вычислительной химии по умолчанию использует препроцессор си но файле модели можно указать любой другой препроцессор применяется для проверки разметки использует директивы define include интересные факты название широко скриптового языка php является рекурсивным акронимом php hp ypertext reprocessor см также директива препроцессор gpre сниппет примечания ссылки dsl design in lisp снизу вверх the pikt piktc text script and configuration file preprocessor категория препроцессоры