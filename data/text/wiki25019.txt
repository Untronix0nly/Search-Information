обмен при помощи исключающего или кзор своп алгоритм это алгоритм котором используется операция исключающего или xor для обмена значениями между переменными которые содержат данные одного типа без использования дополнительной временной переменной этот алгоритм работает при помощи свойства симметрической разности которым обладает xor xor для всех алгоритм стандартные алгоритмы обмена требуют использования временного хранилища интуитивный алгоритм для обмена включает копирование во временное хранилище temp установка значением копирование значения из временного хранилища обратно temp или если даны две переменные целого типа арифметический алгоритм для их обмена таков конечно вышеприведённый алгоритм будет прерываться на системах которые перехватывают переполнение целого используя алгоритм обмена при помощи исключающего или однако не требуется ни временное хранилище ни определение переполнения алгоритм данном случае таков где имена переменных не значения xor сохраняем xor сохраняем xor сохраняем алгоритм выглядит проще когда записан псевдокоде xor xor xor это обычно соответствует трём инструкциям машинном коде например коде ассемблера ibm system xor xor xor где регистры операция xor сохраняет результат первом аргументе этот алгоритм особенно привлекателен для программистов на ассемблере из за его эффективности он уничтожает необходимость использовании промежуточного регистра что обычно является ограниченным ресурсом на машинном языке он также уничтожает два цикла доступа памяти которые всегда более дороги по сравнению регистровыми операциями примеры кода object pascal процедура на object pascal для обмена двух целых используя алгоритм обмена исключающим или procedure xorswap var integer begin if xy begin xor xor xor end end пример кода на для выполнения void xorswap int int if return использование на практике использование алгоритма довольно распространено ассемблерном коде для подобных простых устройств которых стоят жёсткие требования расходу памяти тактов процессора некоторые оптимизирующие компиляторы могут генерировать код использующий этот алгоритм однако на современных цп xor техника значительно медленнее чем использование временной переменной для обмена это происходит по причине выполнения команд xor технике операнды всех команд зависят от результатов предыдущих команд поэтому они должны быть выполнены строго порядке каждом конкретном случае рекомендуется протестировать скорости обеих альтернатив на целевой архитектуре если позволяет язык детали алгоритма должны быть скрыты внутри макроса или инлайн функции это не только делает код чище но также позволяет переключиться на другую процедуру обмена если она быстрее эта уловка также может быть использована при участии obfuscated code contest следует быть внимательным при реализации функции xor swap принимающей указатели или ссылки если такая функция будет вызвана одинаковыми аргументами произойдет не обмен обнуление данных машины аппаратной поддержкой обмена настоящем коде необходимость обмена содержимого двух переменных встречается часто по меньшей мере одна машина позволяла это делать году datacraft позднее harris серии обеспечивала такую возможность избегая необходимости использовании любого алгоритма инструкции обменивали содержимое любых регистров за один такт другая машина pdp имела такую возможность ещё её инструкция exch могла обменивать содержимое любого регистра содержимым любого участка памяти или другого регистра процессоры также имеют инструкцию xchg см также симметрическая разность xor xor связный список примечания категория алгоритмы