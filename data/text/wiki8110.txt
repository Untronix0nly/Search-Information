возможное официальное изображение ipv новая версия интернет протокола ip призванная решить проблемы которыми столкнулась предыдущая версия ipv при её использовании интернете за счёт использования длины адреса бит вместо протокол был разработан ietf настоящее время протокол ipv уже используется нескольких тысячах сетей по всему миру более сетей на осень но пока ещё не получил столь широкого распространения интернете как ipv на конец года доля ipv сетевом трафике составляла около концу года ожидался рост до согласно статистике google на октябрь года ipv составляет около сетевом трафике россии коммерческое использование операторами связи невелико не более трафика dns серверы многих российских регистраторов доменов провайдеров хостинга используют ipv после того как адресное пространство ipv закончится два стека протоколов ipv ipv будут использоваться параллельно постепенным увеличением доли трафика ipv по сравнению ipv такая ситуация станет возможной из за наличия огромного количества устройств том числе устаревших не поддерживающих ipv требующих специального преобразования для работы устройствами использующими только ipv история создания конце стала очевидна необходимость разработки способов сохранения адресного пространства интернета начале несмотря на внедрение бесклассовой адресации стало ясно что этого недостаточно для предотвращения исчерпания адресов необходимы дальнейшие изменения инфраструктуры интернета началу года появилось несколько предложений концу года ietf объявила конкурс для рабочих групп на создание интернет протокола следующего поколения ipng июля года ietf утвердила модель ipng образованием нескольких рабочих групп ipng году была выпущена серия rfc определяющих интернет протокол версии начиная rfc ietf назначила новому протоколу версию так как версия была ранее назначена протоколу для передачи видео аудио исчерпание ipv адресов оценки времени полного исчерпания ipv адресов различались так году директор apnic пол уилсон заявил что основываясь на темпах развёртывания сети интернет того времени свободного адресного пространства хватит на одно два десятилетия сентябре года cisco systems предположила что пула доступных адресов хватит на лет февраля агентство iana распределило последние блоков ipv региональным интернет регистраторам на этот момент ожидалось что общий запас свободных блоков адресов региональных интернет регистраторов rir закончится течение срока от полугода apnic до пяти лет afrinic по состоянию на сентябрь года об исчерпании общего запаса свободных блоков ipv адресов ограничениях на выдачу новых диапазонов адресов объявили все региональные регистраторы кроме afrinic arin объявил полном исчерпании свободных ipv адресов для остальных регистраторов этот момент прогнозируется начиная года выделение ipv адресов европе азии латинской америке регистраторы apnic ripe ncc lacnic продолжается блоками по адреса тестирование протокола июня года состоялся международный день ipv мероприятие по тестированию готовности мирового интернет сообщества переходу ipv на ipv рамках которого участвующие акции компании добавили своим сайтам ipv записи на один день тестирование прошло успешно накопленные данные будут учтены при последующем внедрении протокола для составления рекомендаций внедрение протокола перевод на ipv начал осуществляться внутри google года тестирование ipv признано успешным июня года состоялся всемирный запуск ipv интернет провайдеры включат ipv как минимум для своих пользователей уже подписались at comcast free telecom internode kddi time warner cable xs all производители сетевого оборудования активируют ipv качестве настроек по умолчанию маршрутизаторах cisco link веб компании включат ipv на своих основных сайтах google facebook microsoft bing yahoo некоторые переводят на ipv также корпоративные сети спецификации стандарта мобильных сетей lte указана обязательная поддержка протокола ipv сравнение ipv иногда утверждается что новый протокол может обеспечить до адресов на каждого жителя земли такое большое адресное пространство было введено ради иерархичности адресов это упрощает маршрутизацию тем не менее увеличенное пространство адресов сделает nat необязательным классическое применение ipv по сети на абонента используется только unicast адресация обеспечит возможность использования более млн ip адресов на каждого жителя земли из ipv убраны функции усложняющие работу маршрутизаторов маршрутизаторы больше не должны фрагментировать пакет вместо этого пакет отбрасывается icmp уведомлением превышении mtu указанием величины mtu следующего канала который этому пакету не удалось войти ipv размер mtu icmp пакете не указывался отправителю требовалось осуществлять подбор mtu техникой path mtu discovery для лучшей работы протоколов требовательных потерям минимальный mtu поднят до байт фрагментация поддерживается как опция информация фрагментации пакетов вынесена из основного заголовка расширенные возможна только по инициативе передающей стороны из ip заголовка исключена контрольная сумма учётом того что канальные ethernet транспортные tcp udp протоколы имеют свои контрольные суммы ещё одна контрольная сумма на уровне ip воспринимается как излишняя кроме того модификация поля hop limit или ttl ipv на каждом маршрутизаторе ipv приводила необходимости её постоянного перерасчёта несмотря на больший по сравнению предыдущей версией протокола размер адреса ipv байтов вместо заголовок пакета удлинился всего лишь вдвое до байт улучшения ipv по сравнению ipv сверхскоростных сетях возможна поддержка огромных пакетов джамбограмм до гигабайт time to live переименовано hop limit появились метки потоков классы трафика появилось многоадресное вещание stateless address slaac при инициализации сетевого интерфейса ему назначается локальный ipv адрес состоящий из префикса fe идентификатора интерфейса размещённого младшей части адреса качестве идентификатора интерфейса часто используется битный расширенный уникальный идентификатор eui часто ассоциируемый mac адресом локальный адрес действителен только пределах сетевого сегмента канального уровня используется для обмена информационными icmpv пакетами для настройки других адресов узел может запросить информацию настройках сети маршрутизаторов отправив icmpv сообщение router solicitation на групповой адрес маршрутизаторов маршрутизаторы получившие это сообщение отвечают icmpv сообщением router advertisement котором может содержаться информация сетевом префиксе адресе шлюза адресах рекурсивных dns серверов mtu множестве других параметров объединяя сетевой префикс идентификатор интерфейса узел получает новый адрес для защиты персональных данных идентификатор интерфейса может быть заменён на псевдослучайное число для большего контроля может быть использован dhcpv позволяющий администратору маршрутизатора назначать узлу конкретный адрес для провайдеров может использоваться функция делегирования префиксов клиенту что позволяет клиенту просто переходить от провайдера провайдеру без изменения каких либо настроек метки потоков введение протоколе ipv поля метка потока позволяет значительно упростить процедуру маршрутизации однородного потока пакетов поток это пакетов посылаемых отправителем определённому адресату при этом предполагается что все пакеты данного потока должны быть подвергнуты определённой обработке характер данной обработки задаётся дополнительными заголовками допускается существование нескольких потоков между отправителем получателем метка потока присваивается узлом отправителем путём генерации битного числа все пакеты одного потока должны иметь одинаковые заголовки обрабатываемые маршрутизатором при получении первого пакета меткой потока маршрутизатор анализирует дополнительные заголовки выполняет предписанные этими заголовками функции запоминает результаты обработки адрес следующего узла опции заголовка переходов перемещение адресов заголовке маршрутизации локальном кэше ключом для такой записи является комбинация адреса источника метки потока последующие пакеты той же комбинацией адреса источника метки потока обрабатываются учётом информации кэша без детального анализа всех полей заголовка время жизни записи кэше составляет не более секунд даже если пакеты этого потока продолжают поступать при обнулении записи кэше получении следующего пакета потока пакет обрабатывается обычном режиме для него происходит новое формирование записи кэше следует отметить что указанное время жизни потока может быть явно определено узлом отправителем помощью протокола управления или опций заголовка переходов может превышать секунд обеспечение безопасности протоколе ipv осуществляется использованием протокола ipsec поддержка которого является обязательной для данной версии протокола qos приоритет пакетов маршрутизаторы определяют на основе первых шести бит поля traffic class первые три бита определяют класс трафика оставшиеся биты определяют приоритет удаления чем больше значение приоритета тем выше приоритет пакета разработчики ipv рекомендуют использовать для определённых категорий приложений следующие коды класса трафика класс трафика назначение трафик заполняющий трафик сетевые новости несущественный информационный трафик электронная почта резерв существенный трафик ftp http nfs резерв интерактивный трафик telnet terminal ssh управляющий трафик маршрутная информация snmp механизмы безопасности отличие от ssl tls протокол ipsec позволит шифровать любые данные том числе udp без необходимости какой либо поддержки со стороны прикладного по основы адресации ipv существуют различные типы адресов ipv одноадресные unicast групповые anycast многоадресные multicast адреса типа unicast хорошо всем известны пакет посланный на такой адрес достигает точности интерфейса который этому адресу соответствует адреса типа anycast синтаксически неотличимы от адресов unicast но они адресуют группу интерфейсов пакет направленный такому адресу попадёт ближайший согласно метрике маршрутизатора интерфейс адреса anycast могут использоваться только адреса типа multicast идентифицируют группу интерфейсов пакет посланный на такой адрес достигнет всех интерфейсов привязанных группе многоадресного вещания адреса ipv обычно xxx xxx xxx выражаются адресами многоадресного вещания ipv крайние адреса подсети ipv например xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx ffff ffff ffff ffff для подсети являются полноправными адресами могут использоваться наравне остальными группы цифр адресе разделяются двоеточиями например fe ff fe cf незначащие старшие нули группах могут быть опущены большое количество нулевых групп может быть пропущено помощью двойного двоеточия fe ff fe cf такой пропуск должен быть единственным адресе типы unicast адресов глобальные соответствуют публичным ipv адресам могут находиться любом не занятом диапазоне настоящее время региональные интернет регистраторы распределяют блок адресов по fff ffff ffff ffff ffff ffff ffff ffff link local соответствуют помощью протокола apipa ipv адресам начинаются fe используется качестве исходного адреса для router solicitation rs router advertisement ra сообщений для обнаружения маршрутизаторов для обнаружения соседей эквивалент arp для ipv как next hop адрес для маршрутов unique local rfc соответствуют внутренним ip адресам которыми версии ipv являлись начинаются цифр fcxx fdxx типы multicast адресов адреса мультикаст бывают двух типов назначенные assigned multicast специальные адреса назначение которых предопределено это для определённых групп устройств мультикастовые адреса отправляемый на такой адрес пакет будет получен всеми устройствами входящими группу запрошенные solicited multicast остальные адреса которые устройства могут использовать для прикладных задач адрес этого типа автоматически появляется когда на некотором интерфейсе появляется юникастовый адрес адрес формируется из сети ff ff оставшиеся бита такие же как настроенного юникастового адреса формат пакета пакеты состоят из управляющей информации необходимой для доставки пакета адресату полезных данных которые требуется переслать управляющая информация делится на содержащуюся основном фиксированном заголовке содержащуюся одном из необязательных дополнительных заголовков полезные данные как правило это дейтаграмма или фрагмент протокола более высокого транспортного уровня но могут быть данные сетевого уровня например icmpv ospf ipv пакеты обычно передаются помощью протоколов канального уровня таких как ethernet который инкапсулирует каждый пакет кадр но ipv пакет может быть передан помощью туннельного протокола более высокого уровня например to или teredo нотация адреса ipv отображаются как восемь четырёхзначных чисел то есть групп по четыре символа разделённых двоеточием пример адреса если две более групп подряд равны то они могут быть опущены заменены на двойное двоеточие незначащие старшие нули группах могут быть опущены например db ae ad может быть сокращён до db ae ad или ae ad может быть сокращён до ae ad сокращению не могут быть подвергнуты разделённые нулевые группы из за возникновения неоднозначности также есть специальная нотация для записи встроенного отображённого ipv на ipv ней последние группы знаков заменены на ipv адрес его формате пример при использовании ipv адреса url необходимо заключать адрес квадратные скобки если необходимо указать порт то он пишется после скобок адреса ipv ipv адрес длина префикса биты описание заметки см ipv loopback адрес см ipv xx xx xx xx встроенный ipv нижние бита это адрес ipv также называется ipv совместимым ipv адресом устарел больше не используется ffff xx xx xx xx адрес ipv отображённый на ipv нижние бита это адрес ipv для хостов не поддерживающих ipv ff зарезервирован для доступа из подсети ipv публичной сети ipv через механизм трансляции nat teredo зарезервирован для туннелей teredo rfc db зарезервирован для примеров документации rfc to зарезервирован для туннелей to rfc fe febf link local аналог ipv fec feff site local помечен как устаревший rfc аналог внутренних сетей fc unique local unicast пришёл на смену site local rfc ff multicast см также ipv адрес ipv ipv teredo протокол инкапсуляции ipv ipv udp to протокол инкапсуляции ipv ipv rd механизм перехода ipv на ipv пределах одной сети tcp ip sctp международный день ipv примечания ссылки ipv калькулятор конвертер ipv сервис who is ipv как настроить ipv чаво быстрый курс ipv linux настройка ipv на маршрутизаторах cisco европа говорит переходе на ipv переход на ipv начался сводная таблица типов ipv адресов cisco ipv lab ipv deployment интерактивная карта внедрения ipv статистика внедрения ipv ipv для профессионалов интуит ру категория протоколы сетевого уровня