bgp протокол граничного шлюза динамический протокол маршрутизации относится классу протоколов маршрутизации внешнего шлюза англ egp external gateway protocol на текущий момент является основным протоколом динамической маршрутизации сети интернет протокол bgp предназначен для обмена информацией достижимости подсетей между автономными системами ас англ as autonomous system то есть группами маршрутизаторов под единым техническим управлением использующими протокол внутридоменной маршрутизации для определения маршрутов внутри себя протокол междоменной маршрутизации для определения маршрутов доставки пакетов другие ас передаваемая информация включает себя список ас которым имеется доступ через данную систему выбор наилучших маршрутов осуществляется исходя из правил принятых сети bgp поддерживает бесклассовую адресацию использует суммирование маршрутов для уменьшения таблиц маршрутизации года действует четвёртая версия протокола все предыдущие версии являются устаревшими bgp наряду dns является одним из главных механизмов обеспечивающих интернета bgp является протоколом прикладного уровня функционирует поверх протокола транспортного уровня tcp порт после установки соединения передаётся информация обо всех маршрутах предназначенных для экспорта дальнейшем передаётся только информация об изменениях таблицах маршрутизации при закрытии соединения удаляются все маршруты информация которых передана противоположной стороной формат сообщения сообщение bgp начинается заголовка после которого зависимости от типа сообщения могут следовать данные максимальная длина сообщения октетов минимальная октетов заголовок сообщения содержит следующие поля маркер октетов используется для совместимости должен быть заполнен единицами длина октета длина сообщения октетах включая заголовок тип октет открытие обновление информации оповещение сохранение соединения открытие первое сообщение после установки соединения должно быть открытие если сообщение успешно обработано ответ будет послано сохранение соединения дополнение заголовку bgp сообщение открытие содержит следующие поля версия октет версия протокола текущее значение моя система октета номер автономной системы интервал времени октета максимальный интервал времени секундах между получением сообщений обновление информации или сохранение соединения идентификатор отправителя октета устанавливается равным ip адресу длина дополнительных параметров октет дополнительные параметры тип параметра октет длина параметра октет значение параметра обновление информации сообщение обновление информации предназначено для передачи информации маршрутах между ас сообщение может указывать новые маршруты удалять неработающие структура сообщения флаги атрибутов бит значение дополнительный стандартный транзитивный для стандартных всегда информация частичная полная поле длины атрибута два октета один октет не используются должны быть длина удаляемых маршрутов октета удаляемые маршруты длина октет длина битах префикса ip адреса префикс ip адреса дополненный минимальным количеством бит до полного октета длина атрибутов пути октета атрибуты пути тип атрибута флаг атрибута код атрибута длина атрибута или октета зависимости от флага данные атрибута информация достижимости список префиксов ip адресов длина октет длина битах префикса ip адреса нулевая длина соответствие всем ip адресам префикс ip адреса дополненный минимальным количеством бит до полного октета все атрибуты пути соответствуют всем записям поле информация достижимости сохранение соединения сообщение сохранения соединения должно посылаться не реже чем раз одну третью часть максимального интервала времени между сообщениями но не чаще чем один раз секунду если интервал времени установлен равным нулю то сообщение не должно периодически рассылаться сообщение не использует дополнительных полей оповещение оповещение посылается случае обнаружения ошибки при этом соединение закрывается сообщение содержит следующие поля код ошибки октет субкод октет данные процесс выбора процесс выбора запускается после обновления информации служит для отбора маршрутов предназначенных для использования локально передачи другим маршрутизаторам использующим bgp процесс использует атрибуты полученных маршрутов для оценки степени предпочтения маршрута или информации том что маршрут является неподходящим для занесения базу маршрутов должен быть исключён из процесса отбора процесс делится на три фазы вычисление степени предпочтения каждого полученного маршрута выбор наилучшего маршрута для каждого места назначения занесение его базу маршрутов передача маршрутов на другие маршрутизаторы при этом может производиться суммирование маршрутов см также egp igp rip ссылки rfc border gateway protocol version rfc border gateway protocol version rfc application of the border gateway protocol in the internet rfc bgp protocol analysis rfc experience with the bgp protocol rfc bgp ospf interaction rfc border gateway protocol bgp rfc application of the border gateway protocol version in the internet rfc experience with the bgp protocol rfc bgp protocol analysis rfc bgp idrp route server alternative to full mesh routing rfc bgp communities attribute rfc an application of the bgp community attribute in multi home routing bgp looking glass bgp protocol diagnostic графики роста таблицы маршутизации категория протоколы маршрутизации категория интернет протоколы