igmp протокол управления группами интернета протокол управления групповой multicast передачей данных сетях основанных на протоколе ip igmp используется ip узлами для организации сетевых устройств группы этот протокол является частью спецификации групповой передачи пакетов ip сетях igmp расположен на сетевом уровне он во многом аналогичен icmp для одноадресной передачи igmp может использоваться для поддержки потокового видео онлайн игр для этих типов приложений он позволяет использовать сетевые ресурсы более эффективно igmp уязвим некоторым атакам брандмауэры обычно позволяют пользователю отключить этот протокол если нем нет необходимости igmp используется только сетях ipv так как ipv групповая передача пакетов реализована через протокол multicast listener discovery архитектура сеть предоставляющая услуги групповой передачи данных например видео использованием igmp может иметь следующую базовую архитектуру igmp architecture example igmp используется клиентским компьютером соседними коммутаторами для соединения клиента локального маршрутизатора осуществляющего групповую передачу далее между локальным удаленным используется протокол protocol independent multicast pim его помощью групповой трафик направляется от видеосервера многочисленным клиентам групповой передачи стандарты согласно request for comments rfc документу сообщества internet engineering task force ietf существует три версии igmp igmpv определен rfc igmpv rfc igmpv rfc основным улучшением igmpv относительно igmpv является поддержка фильтрации ip адресов помощью этого механизма узел может сообщить каких адресов он хочет получать пакеты каких нет реализация протокол igmp реализован виде серверной клиентской частей первая из которых выполняется на маршрутизаторе вторая узле сети получающем групповой трафик клиент посылает уведомление принадлежности какой либо группе локальному маршрутизатору это время маршрутизатор находится ожидании уведомлений периодически рассылает клиентам запросы операционные системы семейств bsd linux windows поддерживают клиентскую часть протокола системе linux igmpv был добавлен версии ядра для freebsd igmpv был добавлен версии для реализации серверной части igmp linux используются демоны например mrouted может действовать как igmp маршрутизатор существуют также целые программные комплексы такие как xorp позволяющие превратить обычный компьютер маршрутизатор групповой передачи openbsd поддержка igmp ядре изначально включает себя базовую поддержку маршрутизации имеющиеся составе ос демоны mrouted dvmrpd позволяют решать более сложные задачи например туннелирование multicast трафика структура пакетов igmpv определена стандартом rfc запрос принадлежности membership query message запросы принадлежности рассылаются для того чтобы для каждого узла определить его принадлежность каким либо группам group membership state список источников информации от которых данный узел хочет получать сообщения reception state существует три типа таких запросов общие запросы general queries позволяют получить полную информацию для каждого из узлов маршрутизатор периодически рассылает эти запросы всем системам подключенным его сети запросы указанием группы group specific queries используются для определения состояния подписки для заданной группы узлов такие запросы рассылаются по групповому адресу запросы указанием группы источника group and source specific queries позволяет для каждого узла заданной группы определить какие сообщения из всех посылаемых заданными источниками этот узел хочет получать октет type max resp code checksum group address resv qrv qqic number of sources source address source address код макс ответа max resp code максимальное время секунды ожидания ответа данному запросу если значением является число меньшее оно используется напрямую если же значение больше или равно оно как экспонента мантиссой контрольная сумма checksum битная контрольная сумма для всего igmp сообщения групповой адрес group address групповой адрес используемый запросах указанием группы при общем запросе это поле устанавливается равным нулю resv поле зарезервировано его следует обнулять при посылке игнорировать при получении флаг прекратить серверную обработку suppress router side processing установка этого флага указывает всем маршрутизаторам получившим данное сообщение прекратить обновления по таймеру qrv переменная надежности запрашивающего querier robustness variable содержит переменную надежности robustness variable значение которой используется посылающим устройством маршрутизаторы должны обновлять их переменные надежности соответствии последним полученным запросом пока это поле ненулевое qqic код интервала запроса querier query interval code значение поля указывает интервал между запросами query interval используемый запрашивающим если значением является число меньшее оно используется напрямую если же значение больше или равно оно как экспонента мантиссой количество источников number of sources определяет число адресов источников присутствующих этом запросе для общих запросов запросов указанием группы это значение равно нулю для запросов указанием группы источника это поле ненулевое оно ограничено значением mtu сети адрес источника source address массив индивидуальных не групповых ip адресов источников данных отчёт принадлежности membership report message октет type reserved checksum reserved number of group record group record group record reserved должно устанавливаться ноль при передаче игнорироваться при приёме number of group record количество полей group record сообщении group record блок полей содержащий информацию членстве отправителя группе record type aux data len number of sources multicast address source address source address auxilary data record type тип записи текущее состояние посылается ответ на запрос сообщает текущем режиме фильтрации относительно указанного группового адреса принимает значения mode_is_include mode_is_exclude изменение режима посылается при изменении режима фильтрации принимает значения изменение списка источников посылается при изменении списка источников без изменения режима фильтрации режиме include адреса добавляются списку режиме exclude удаляются из списка block_old_ sources режиме exclude адреса добавляются списку режиме include удаляются из списка aux data len длина дополнительных данных битных словах number of sources количество адресов источников данных multicast address групповой адрес которому относится информация записи source address массив индивидуальных ip адресов источников данных auxilary data дополнительная информация не должна использоваться текущей версии протокола другие типы пакетов тип наименование описание version membership report должны поддерживаться для совместимости предыдущими версиями version membership report version leave group distance vector multicast routing protocol протокол см также igmp snooping sctp примечания ссылки network sorcery igmp ipv multicasting tools and settings on microsoft technet different version and details on igmp категория tcp ip категория протоколы сетевого уровня категория интернет протоколы