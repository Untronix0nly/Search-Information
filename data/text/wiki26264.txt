second extended file system дословно вторая расширенная файловая система сокращённо ext иногда ext fs файловая система ядра linux была разработана взамен существующей тогда ext по скорости работы она может служить эталоном тестах файловых систем так тестах на скорость чтения записи проведённых the dell techcenter файловая система ext обгоняет ext уступает лишь более современной ext тесте на чтение главный недостаток ext одна из причин демонстрации столь высокой заключается том что она не является журналируемой файловой системой он был устранён файловой системе ext следующей версии extended file system полностью совместимой ext но для ssd это скорее плюс поскольку продлевает жизнь накопителя это основная причина почему ext до сих пор поддерживается anaconda ubiquity файловая система ext по прежнему используется на флеш картах твердотельных накопителях ssd так как отсутствие журналирования является преимуществом при работе накопителями имеющими ограничение на количество циклов записи история на заре развития linux использовала файловую систему ос minix она была довольно стабильна но оставалась разрядной как следствие имела жёсткое ограничение мегабайта на раздел также присутствовало ограничение на максимальную длину имени файла оно составляло символов эти другие ограничения послужили стимулом разработке расширенной файловой системы решавшей две главные проблемы minix новая файловая система была представлена апреле года ext расширила ограничения на размер файла до гигабайт установила предельную длину имени файла байт тем не менее оставалось ещё много нерешённых проблем не было поддержки раздельного доступа временных меток модификации данных именно эти проблемы послужили инициативой для создания следующей версии расширенной файловой системы ext разработанной январе года ext были также реализованы соответствующие стандарту posix списки контроля доступа acl расширенные атрибуты файлов логическая организация файловой системы ext файл the net hierarhy of the catalogs svg thumb right сетевая иерархия каталогов файловой системы ext граф описывающий иерархию каталогов файловой системы ext представляет собой сеть причиной такой организации является то что один файл может входить сразу несколько каталогов все типы файлов имеют символьные имена иерархически организованных файловых системах обычно используются три типа имен простые составные относительные не является исключением ext ограничения на простое имя состоят том что его длина не должна превышать байт также имени не должны присутствовать символ nul слеш ограничения на символ nul связаны представлением строк языке си на символ слеш тем что он используются как разделительный символ между каталогами полное имя представляет собой цепочку простых символьных имен всех каталогов через которые проходит путь от корня до данного файла файловой системе ext файл может входить несколько каталогов значит иметь несколько полных имен здесь справедливо соответствие один файл много полных имен любом случае полное имя однозначно определяет файл атрибутами файловой системы ext являются тип права доступа файлу владелец группа доступа информация разрешённых операциях acl время создания дата последнего доступа дата последнего изменения время последнего удаления текущий размер файла спецификация файла обычный файл каталог файл байт устройства файл блочно устройства именованный канал символическая ссылка число занимаемых блоков другие атрибуты файлов хранятся не каталогах как это сделано ряде простых файловых систем специальных таблицах результате каталог имеет очень простую структуру состоящую всего из двух частей номера индексного дескриптора имени файла внутренняя организация файловой системы ext структура дискового раздела как любой файловой системе unix составе ext можно выделить следующие составляющие блоки группы блоков индексный дескриптор суперблок всё пространство раздела диска разбивается на блоки фиксированного размера кратные размеру сектора или байт размер блока указывается при создании файловой системы на разделе диска меньший размер блока позволяет сэкономить место на жёстком диске но также ограничивает максимальный размер файловой системы все блоки имеют порядковые номера целью уменьшения фрагментации количества перемещений головок жёсткого диска при чтении больших массивов данных блоки объединяются группы блоков базовым понятием файловой системы является индексный дескриптор или inode это специальная структура которая содержит информацию об атрибутах физическом расположении файла индексные дескрипторы объединены таблицу которая содержится начале каждой группы блоков суперблок обобщенная структурная схема фс ext суперблок основной элемент файловой системы ext он содержит общую информацию файловой системе общее число блоков индексных дескрипторов файловой системе число свободных блоков индексных дескрипторов файловой системе размер блока файловой системы количество блоков индексных дескрипторов группе блоков размер индексного дескриптора идентификатор файловой системы магическое число xef для семейства файловых систем ext дата последней проверки файловой системы количество произведённых монтирований флаг состояния файловой системы суперблок находится байтах от начала раздела следующем блоке после суперблока располагается глобальная дескрипторная таблица описание групп блоков представляющее собой массив содержащий общую информацию обо всех группах блоков раздела от целостности суперблока напрямую зависит файловой системы операционная система создаёт несколько резервных копий суперблока на случай повреждения раздела помощью флага состояния операционная система определяет текущее состояние файловой системы если файловая система монтируется на чтение то флаг состояния будет указывать что файловая система целостна состояние clean если файловая система монтируется на чтение запись то флаг состояния заносится информация том что файловая система используется состояние not clean после размонтирования файловой системы флаг состояния снова должен указывать на целостность файловой системы флаг состояния помогает определять возможные повреждения файловой системы например если питание компьютера было резко выключено то флаг состояния будет указывать на некорректное завершение работы файловой системой при следующей загрузке компьютера операционная система должна будет проверить файловую систему на ошибки если флаг состояния не указывает на целостность файловой системы группы блоков все блоки раздела ext объединяются группы блоков для каждой группы создаётся отдельная запись глобальной дескрипторной таблице которой хранятся основные параметры номер блока битовой карте блоков номер блока битовой карте inode номер блока таблице inode число свободных блоков группе число индексных дескрипторов содержащих каталоги битовая карта блоков это структура каждый бит которой показывает отведён ли соответствующий ему блок какому либо файлу если бит равен то блок занят аналогичную функцию выполняет битовая карта индексных дескрипторов которая показывает какие именно индексные дескрипторы заняты какие нет ядро linux используя число индексных дескрипторов содержащих каталоги пытается равномерно распределить inode каталогов по группам inode файлов старается по возможности переместить группу родительским каталогом все оставшееся место обозначенное таблице как данные отводится для хранения файлов каталоги каталоги могут содержать внутри себя другие каталоги или файлы физически каталог представляет из себя специальный файл содержащий записи произвольной длины каждая запись хранит себе следующие данные номер индексного дескриптора файла размер записи длина имени файла имя файла подобная организация каталога позволяет хранить нём длинные имена файлов без потери места на диске когда операционная система пытается найти расположение файла или каталога на диске она по очереди загружает память содержимое каждого каталога указанного пути файлу или каталогу чтобы по имени найти индексный дескриптор следующего каталога указанного пути обход каталогов продолжается пока необходимый файл или каталог не будет найден система адресации данных система адресации фс ext система адресации данных это одна из самых важных составляющих файловой системы именно она позволяет находить нужный файл среди множества как пустых так занятых блоков на диске файловая система ext использует следующую схему адресации блоков файла для хранения адреса файла выделено полей каждое из которых состоит из байт если файл умещается блоков то номера соответствующих кластеров непосредственно перечисляются первых двенадцати полях адреса если размер файла превышает блоков то следующее поле содержит адрес кластера котором могут быть расположены номера следующих блоков файла таким образом поле используется для косвенной адресации при максимальном размере блока байт кластер соответствующий му полю может содержать до номеров следующих блоков файла если размер файла превышает блоков то используется поле котором находится адрес кластера содержащего номеров кластеров каждый из которых ссылается на блока файла здесь применяется уже двойная косвенная адресация наконец если файл включает более блоков то используется последнее поле для тройной косвенной адресации данная система адресации позволяет при максимальном размере блока байт иметь файлы размер которых превышает tb см также список файловых систем сравнение файловых систем extended file system файловая система ext файловая система ext saver программа для доступа ext из под windows примечания литература ссылки низкоуровневое устройство файловой системы ext категория файловые системы категория linux