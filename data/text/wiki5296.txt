форт один из первых конкатенативных языков котором программы записываются лексем слов терминологии языка форт математические выражения представляются постфиксной записью при использовании стековой нотации поддерживает механизмы метарасширения семантики синтаксиса языка для адаптации нужной предметной области синтаксис базового уровня форте прост состоит из единственного правила все определения разделяются пробелами определения форта могут иметь любое сочетание символов ряд свойств именно интерактивность гибкость простота разработки делают форт эффективным языком прикладных исследованиях при создании средств очевидными областями применения этого языка являются встраиваемые системы управления за счёт простоты транслятор зачастую компилятор форта легко реализуется для подавляющего числа также используется как кросс средство применяется также при компьютеров под управлением различных операционных систем или как самостоятельная операционная среда история создание язык форт был создан чарльзом муром конце начале годов мур назвал свой язык fourth считая что это будет язык для эвм четвёртого поколения но так как он работал на машине которая допускала имена составленные не более чем из пяти прописных букв название было преобразовано forth вперёд впрочем первые эксперименты мура по созданию простого интерпретатора облегчающего написание программ управления астрономическим оборудованием относятся ещё концу годов года мур работал участвуя разработке программ сбора обработки получаемых радиотелескопом данных именно тогда появилась первая реализация языка форт этой работе также участвовала сотрудница мура которую можно считать вторым мире форт программистом вновь созданный язык был принят качестве основного языка американском астрономическом обществе позднее году чарльз мур элизабет ратер основали компанию forth inc ходе работы которой течение следующего десятилетия язык был портирован на множество платформ конце годов программистами развитии языка была создана группа forth interest group fig этой группой разработана концепция fig forth model общедоступной форт системы которая может быть легко перенесена на популярные компьютерные архитектуры эту эталонную форт систему fig forth часто рассматривают как первоначальный стандарт языка стандартизация идея официальной стандартизации форта первоначально возникла рамках международного объединения астрономов мае года на встрече национальной обсерватории китт пик сша был выработан глоссарий языка форт обозначенный как ast феврале года утрехте был принят стандарт forth ориентированный на реализацию на микрокомпьютеры октябре года встреча на острове санта каталина калифорния закончилась разработкой стандарта forth который на эвм всех типов осенью года состоялась встреча по разработке следующего стандарта утверждённого году как forth стандарт форт отличается от стандарта форт некоторыми деталями но не по существу году составе acm была организована группа sigforth была соответствующая российская группа acm председатель проф баранов санкт петербург спииран сейчас sigforth существует составе более общей группы наконец году после согласования котором участвовали многие фирмы был принят ansi стандарт языка форт дальнейшее развитие примеры использования известный пример успешного применения форта его использование программном обеспечении глубоководного спускаемого аппарата при поисках титаника году также форт был применён программном обеспечении спектрографа на шаттле микромодулях управления искусственными спутниками земли для системы управления аэропорту эр рияда системах компьютерного зрения автоматизации анализа крови контроля карманных переводчиках диалект языка форт используется openboot базовом программном обеспечении эвм на базе процессоров sparc powerpc начале на основе языка форт джон уорнок чак гешке из adobe systems создали язык postscript широко используемый для управления устройствами печати послуживший основой для создания формата pdf существуют процессоры контроллеры поддерживающие вычислительную модель языка на аппаратном уровне создано множество открытых реализаций форта для различных аппаратных платформ отдельные фирмы среди которых следует отметить прежде всего основанную чарльзом муром forth inc британскую компанию microprocessor engineering ltd поставляют различные по своим возможностям коммерческие версии языка ежегодно проводятся конференции еврофорт euroforth том числе россии англии австрии германии испании чехии ранее чехословакии основные понятия классической форт системы основная часть форт системы это связный список слов или словарь из которого слово вызывается по имени для выполнения специфических функций на форте состоит определении новых слов на основе слов определённых словаре ранее как только новые слова скомпилированы словарь они не отличаются по форме от слов которые нём уже имелись описание слова словаре называется статьёй структура типичной статьи словаря форта поле имени содержит имя статьи идентификатор слова виде строки со счётчиком также несколько флагов поле связи указатель на предыдущую статью поле кода указатель на код для интерпретации статьи поле параметров семантика слова зависимости от поля кода условно статьи форта можно разделить на две категории низкоуровневые статьи форт статьи статьи первого типа содержат поле кода указатель на процедуру кодах целевого процессора непосредственно выполняющую семантику слова поле параметров таких статей располагаются передаваемые процедуре параметры либо сам её код форт статьи содержат поле параметров указатели на другие статьи поле кода указывает на специальную процедуру называемую интерпретатором ссылок на практике структура статьи зависит от реализации но как правило похожа на рассмотренную выше принцип используемый внутри поля параметров форт статьи называется шитый код интерпретатор ссылок виртуальной форт машиной грамматически текст обрабатываемый транслятором форта представляет собой лексем разделённых пробелами символами конца строки транслятор входной строки выбирает очередной токен производит его поиск текущем словаре причём поиск ведётся от более новых слов старым если слово не найдено предпринимается попытка токен качестве записи числа которое случае успеха помещается на вершину стека если же токен соответствует слову форта анализируется текущее состояния флага compile форт системы если флаг сброшен то слово исполняется управление передаётся по указателю поля кода найденной статьи если флаг установлен слово компилируется то есть указатель на его поле кода дописывается текущую создаваемую статью если было оттранслировано число оно снимается со стека компилируется литеральный код исполнение которого внутри словарной статьи помещает число на вершину стека кроме того слова могут содержать флаг immediate немедленный этом случае они всегда исполняются механизм передачи параметров между словами через стек данных через ячейки памяти через именованные локальные переменные стандарт года язык предоставляет способ работы памятью системы как линейной областью обязательным компонентом системы является также стек возвратов доступен программно для изменения потока управления программы всё вышесказанное относится понятию форт только первом приближении форт это не совсем язык вернее он перекрывает понятие языка форт большей степени является виртуальной машиной операционной системой forthos синтаксис семантику форта можно расширить до любого другого языка прямо во время интерпретации компиляции форт программы использовать форт качестве метаязыка удобно благодаря доступности средств форта поддерживающих те языки которые уже есть форт системе все ресурсы форт системы доступны пользователю представлены виде словарных статей как правило словарные статьи определённые пользователем имеют точно такое же представление форт системе как все остальные словарные статьи из которых состоит вся форт система типы кода форта качестве машинного представления форт программы используется тот или иной вид шитого кода при использовании подпрограммного кода получается машинный код котором по сравнению кодом сгенерированном компилятором обычного языка где на единственный стек кладутся переменные адреса возвратов из подпрограмм отсутствуют операции по перетаскиванию параметров подпрограмм качестве стека возвратов используется основной стек процессора стек данных организуется программно при использовании шитого кода отличающегося от подпрограммного определения форта состоящие только из машинного кода называются примитивы таком шитом коде часто стараются использовать основной стек процессора качестве стека данных обращения данным лежащим на нём виде машинных команд pop push одно из не совсем очевидных преимуществ использования косвенного шитого кода том что весь машинный код то есть примитивы вызовы интерпретатора кода переменных могут размещаться одном сегменте кода который будет недоступен для изменения весь остальной код форта размещается сегменте данных этих сегментов может быть много работать единственным номером сегмента легче чем двумя форт системы могут также использовать байт код как логическое завершение развития косвенного шитого кода свёрнутого шитого кода адресной таблицей этом случае код программы форта представляет собой байтов или код некоторого придуманного виртуального процессора для исполнения этого кода должна существовать таблица на адресов байтовых или байтовых по которым расположены примитивы форта или сложные определения этот вариант сильно отличается от других видов кода заслуживает особого внимания как косвенном шитом коде примитивы форта могут быть расположены едином сегменте кода защищённом от вмешательства прошитом пзу примитивы зависят от конкретной платформы могут быть выполнены виде отдельного блока вся остальная часть форта является переносимой на любую машину вокруг таблицы на определений группируется отдельный словарь лексикон предназначенный для конкретной задачи или группы задач эти определений занимают места не более то есть таблица может содержать байтовые адреса смещения относительно начала словаря байтовый код позволяет расширить количество определений за счет древовидной структуры словарей до любой величины сохраняя минимальные размеры программы байтовый код может быть стандартизован как для java такой код может быстро пересылаться по сети исполняться на машинах любой платформой байтовый код позволяет эмулировать любой процессор или программную систему выполнять отладку разработанных для них программ примеры программ привет мир пример определения слова sign печатающего соответствующую фразу зависимости от знака числа на вершине стека напечатать знак числа sign dup if ноль else if положительное число else отрицательное число then then пример реального кода создающего строчную константу принятом форт виде со счётчиком создать константу из строки constant addr name create dup do dup char loop drop does dup cell swap этом примере создаётся определение слова name помощью слова create при исполнении слова name на стек будет положен адрес указателя области памяти который был во время компиляции слова для того чтобы его можно было как то использовать туда записывается компилируется строка при выполнении слова выполняются слова указанные после слова does таким образом этом примере была создана новая синтаксическая конструкция подобные возможности редко представлены других языках кроме создания новых синтаксических конструкций одной из самых сильных возможностей форта является возможность вмешиваться процесс компиляции помощью слов немедленного исполнения immediate слов примеры таких стандартных слов временное переключение режим исполнения фактически часто просто записывает переменную state переключиться обратно режим компиляции literal компилировать число данный момент лежащее на вершине стека как константу также является словом немедленного исполнения пример кода где используются эти слова некоторый размер данных килобайтах constant size напечатать отчёт пересчёте килобайтов байты report size килобайт эквивалентны size literal байтам особенности языка forth одна из постоянных тем споров вокруг языка форт это место которое он занимает среди классических императивных языков программы на форте имеют крайне непривычный вид программа состоит из необычной слов среди которых отсутствуют так называемые ключевые слова которые распознаются обрабатываются других языках специальным образом выходом серии фильмов звёздные войны по этому поводу появилась шутка ставшая ныне классической которая хорошо иллюстрирует данную особенность форта тайна речи магистра йоды открыта старым программистом на форте он был приведённый пример заодно указывает на уникальную особенность форта отсутствие списка параметров скобках возможность программировать на родном языке использование словарных конструкций родного языка позволяет сделать программу понятной что повышает её надёжность обратная польская запись арифметических выражений наличие нескольких стеков двойственная природа компилятора форта нельзя утверждать однозначно является ли форт компилятором или интерпретатором практически всегда его можно использовать двух режимах за исключением редких случаев вроде целевой компиляции трансляции машинный код программы для системы иной архитектурой отсутствие системы типов подобно языкам ассемблера форте нет встроенной системы типов нет возможности узнать что лежит на вершине стека число со знаком число без знака указатель на строку символ или два числа рассматриваемых как одно длинное число контроль типов возлагается на программиста при этом используются специальные наборы слов например запись чтение ячеек памяти производят словами символов словами некоторые сущности выносятся специальные стеки например стек чисел плавающей запятой согласно стандарту ansi forth он может быть может не быть реализован помощью основного стека эти особенности определяют преимущества недостатки языка форт опытный программист знакомый системой команд архитектурой процессора может написать ядро форт системы за несколько дней свобода предоставляемая программисту требует сильного самоконтроля входной порог для на форте ниже чем классических языков но требует привыкания понимания не только возможностей особенностей синтаксиса форта но также понимания философии лежащей его основе форт не поддерживает никакую парадигму поддерживает их все одновременно написать набор слов для организации ооп программе на форте их может быть одновременно несколько они будут отлично уживаться вместе гораздо проще чем решить какие возможности от этого набора слов требуются разбиение программы на множество мелких слов позволяет легко быстро проверять их по отдельности передавая им нужные наборы входных параметров контролируя то что остаётся на стеке фактически это означает что для тестирования какого то компонента программы можно не загружать все зависимые компоненты целиком большинство реализаций форта позволяют сделать декомпиляцию программы полученный текст мало отличается от исходного форт позволяет реализовать любую технологию доступную других языках системах нём также допустимы приёмы запрещённые других языках например самомодификация кода устранение негативных последствий этих приёмов путём создания правильного лексикона стимулирующего грамотную методику их использования также возложено на программиста размер кода форта для разрядных систем при грамотном написании программы иногда раз меньше кода из программы на си для разрядных систем этот разрыв ещё больше операционных системах общий выигрыш может составлять уже сотни то тысячи крат причина очень простая готовая задача на форте имеет размер несколько байт все вспомогательные подпрограммы реализованы виде определений доступных всем система на форте вместится процессор который другие системы влезть принципе не способны синхронизация процессов потоков многозадачных системах переключение контекста реализация доступа ограниченным ресурсам сложнейшие проблемы при написании ос для поддержки этих возможностей даже создаются специальные команды для интерпретатора это вообще не проблема поскольку он эмулирует любой процессор любую необходимую команду возможно что на самом деле больше всего развитию форта препятствует тяжёлое наследство пришедшее от машин низкими возможностями для которых он изначально создавался стандарте ansi forth существуют например следующие особенности переносимая программа должна предполагать что стек чисел плавающей запятой может быть реализован использованием основного стека счастью для большинства современных компиляторов это не так но сам факт наличия такого пункта стандарте создаёт определённые неудобства при активным использованием арифметики плавающей точкой эту норму стандарта традиционно игнорируют аналогичная норма существует относительно стека потока управления здесь всё не так просто так как часто это именно так есть процессе компиляции стек используется самим компилятором абсолютном большинстве случаев никакого влияния на программу это не оказывает но про саму особенность надо помнить например если вы хотите процессе компиляции вычислить какое то число за пределами начала определения потом вставить его слово как константу то для этого придётся использовать какой либо обходной путь определения многих слов стандарте слишком низкоуровневые например слово производит не умножение на два как следует из его названия смещает число на один бит старшему двоичному разряду заполняя младший бит нулём конечно на большинстве современных машин это одно то же но сам факт использования особенностей конкретной архитектуры настораживает существуют также более очевидные стандартные слова для сдвига битов lshift rshift многие из этих особенностей следствие того что на момент принятия стандарта существовало множество плохо совместимых форт систем которые базировались на двух частично различающихся стандартах годов см также реализации языка forth языково ориентированное стек стек вызовов стековый язык фортран диалекты colorforth factor язык приложения axiom development kit примечания литература журнальные публикации ссылки сайт forth interst group сайт компании forth inc конференция еврофорт есть все доклады google group стандарт русский перевод стандарта ans forth выполнен сергеем кадочниковым этом переводе известны несколько ошибок например описании слова search русскоязычные ресурсы сайт русскоязычных пользователей языка forth активный форум по языку форт на winglion активный форум по языку форт на msyst активный форум по языку форт на www wrk ru fido su forth история языка форт идеи языка форт от разработчика eserv сайт ларионова коллекции ссылок на форт ресурсы вики сайт посвящённый форт ресурсам коллекция ссылок на ресуры по форт на sourceforge net категория конкатенативные языки категория стековые языки категория семейство языков форт категория языки расширяемым синтаксисом