squid кальмар программный пакет реализующий функцию кэширующего прокси сервера для протоколов http ftp gopher случае соответствующих настроек https разработан сообществом как программа открытым исходным кодом соответствии gnu gpl все запросы выполняет как один неблокируемый процесс ввода вывода используется unix подобных системах ос семейства windows nt имеет возможность взаимодействия active directory windows server путём аутентификации через ldap что позволяет использовать разграничения доступа интернет ресурсам пользователей которые имеют учётные записи на windows server также позволяет организовать нарезку интернет трафика для различных пользователей используется вместе движками mediawiki на wiki хостингах использование кэширующего прокси сервера для сайтов становится выгодно примерно посетителей сутки совместимость сервер squid развивается течение уже многих лет обеспечивает совместимость большинством важнейших протоколов интернета также операционными системами aix bsdi freebsd linux hp ux irix mac os microsoft windows netbsd nextstep osf digital unix openbsd sco unix sunos solaris squid используется системе wikimedia описание архитектуры схема комплекса lamp работающего вместе сервером squid решение для веб сервера во враждебном окружении списки контроля доступа для контроля доступа ресурсам определения ряда действий используются списки контроля доступа acl каждый acl может состоять из нескольких критериев но только одного типа адрес сеть источника запроса цели запроса имя доменное имя источника запроса имя цели запроса части url запроса протокол порт получателя отправителя самого squid метод post или get при передаче данных по http браузер user agent ident запрос рабочей станции номер автономной системы отправителя получателя не для всех случаев авторизация на прокси сервере см ниже номер соединения чаще всего используется для ограничения количества соединений snmp сертификаты пользователя параметры запроса внешние обработчики идентификация squid поддерживает несколько видов идентификации пользователей по ip адресу или доменному имени узла по переданным реквизитам логин пароль по идентификатору агента браузера для идентификации по логину паролю возможно использовать обычные логин пароль ntlm авторизацию внешние программы авторизации определяющие формат авторизации ограничение доступа для групп редиректоры squid имеет возможность переписывать запрашиваемые url squid может быть сконфигурирован так чтобы пропускать входящие url через процесс редиректора выполняемого как внешний процесс подобно dnsserver который возвращает новый url или пустую строку обозначающую отсутствие изменений редиректор не является стандартной частью пакета squid редиректор предоставляет администратору контроль за передвижениями пользователей использование редиректора сочетании прозрачным проксированием дает простой но эффективный контроль над доступом нежелательным ресурсам например развлекательным ресурсам социальным сетям корпоративной сети порнографии программа редиректор должна читать url один на строку со стандартного входа записывать измененные url или пустые строки на стандартный выход нужно заметить что программа редиректор не может использовать ввод вывод squid дописывает дополнительную информацию после url которую редиректор может использовать для принятия решения sams squid account management system программное средство для доступа пользователей прокси серверу squid на данный момент sams настраивает работу редиректоров редиректор sams редиректор работающий напрямую базами sams squidguard очень мощный редиректор стандартный squid простейший редиректор описанный документации squid виды редиректоров редиректор sams написан специально для squid напрямую использует информацию содержащуюся базе данных позволяет включить различное перенаправление запросов для пользователей регулируется шаблонами пользователей редиректор sams обеспечивает ограничение доступа пользователей squid контроль времени доступа пользователей squid ограничение доступа пользователей запрещенным ресурсам или доступ пользователей только разрешенным ресурсам перенаправление запросов пользователей баннерам счетчикам редиректор squidguard мощный редиректор большими возможностями состав редиректора входят списки баннерных порно пр доменов sams добавляет файл конфигурации squidguard squidguard conf настройки на списки запрещенных доменов перенаправления доступа sams настройки на списки идущие squidguard не изменяются не удаляются при использовании редиректора squidguard файл squid conf заносятся acl разрешающие доступ всех пользователей squid ограничение доступа пользователей организовано средствами редиректора стандартный squid этот редиректор описан документации на squid написан на perl редиректор создается после подачи команды на squid на основе списков перенаправления запросов быстрый легкий редиректор но не различает пользователей при использовании этого редиректора ограничение доступа пользователей по спискам запрета доступа организовано использованием acl squid при использовании редиректора squid или если редиректор не используется вовсе то существует возможность при отключении пользователей за превышение трафика них остаётся доступ url ip адресам прописанным списке локальные домены ограничение максимальной скорости соединения ограничение максимальной скорости получения пользователем пользователями squid реализовано помощью механизма дословно пулы задержки механизм ограничения скорости работает по принципу бассейна откуда название pool бассейн который втекает вытекает информация отдельные конфигурируемые подобным образом области памяти называются ведро ведра есть параметры ёмкость скорость наполнения если пользователь пользователи получают информацию на скорости ниже чем скорость наполнения то ведро всегда полно если пользователь кратковременно поднимает скорость получения информации выше скорости наполнения то до момента пока ведро не пусто он не ограничивается по скорости как только ведро становится пустым клиент получает информацию со скоростью наполнения ведра случае наличия групповых индивидуальных вёдер они включаются последовательно существует три типа класса delay pools единое ведро class ограничение на общую потребляемую полосу для всей группы параметры ёмкость бассейна скорость наполнения единое ведро автоматическим формированием индивидуальных вёдер class индивидуальные вёдра формируются из битов ip адреса по единое ведро сетевые вёдра индивидуальные вёдра class сетевое ведро формируется по битам ip адреса для каждого ведра указываются два параметра ёмкость скорость наполнения означает без ограничения попадание пользователей то или иное ведро определяется списками доступа вёдрам они просматриваются порядке упоминания файле конфигурации до первого совпадения пользователи не попадающие ни одно из вёдер скорости не ограничиваются обратное кэширование одной из особенностей squid является возможность работать режиме обратного прокси reverse proxy также известного как ускоритель http accelerator этом случае вместо кэширования запросов нескольких пользователей множеству сайтов кешируются запросы множества пользователей нескольким сайтам этом режиме принятый запрос проверяется на динамичность нужно ли каждый раз обрабатывать запрос нуля возраст актуальны ли ещё данные если данные ещё актуальны не поменялись то запрос не передаётся серверу отдаётся из кеша squid таким образом существенно снижается нагрузка на серверы например википедии запросы страницам кешируются так как от просмотра их содержимое не меняется при этом нагрузка на серверы существенно меньше обработка запроса кешу много проще чем обработка запроса базе данных sql обработка вики разметки формирование веб страницы кроме того обратный прокси способен распределять запросы между несколькими серверами балансируя нагрузку или обеспечивая то есть фактически предоставляет аналогичную кластеру режим прозрачного прокси сервера сочетании некоторыми межсетевыми экранами squid может работать режиме прозрачного прокси этом режиме маршрутизатор вместо того чтобы сразу пересылать http запросы пользователя http серверу интернете перенаправляет их прокси серверу который может работать как на отдельном хосте так на самом маршрутизаторе прокси сервер обрабатывает запрос возможной отдачей содержимого из кеша это содержимое направляется запросившему пользователю для которого оно выглядит как ответ сервера которому адресовался запрос таким образом пользователь может даже не знать что все запросы ответы прошли через прокси сервер при таком подходе проксирования аутентификация не предусмотрена так как прозрачность проксирования это подразумевает достоинства администратору прозрачного прокси сервера не нужно настраивать каждую клиентскую машину для работы прокси недостатки режиме прозрачности не проксируются ftp https запросы для возможности проксирования прозрачном режиме https запросов необходимо собрать поддержкой sslbump примечания ссылки squid cache org домашняя страница проекта категория прокси серверы категория свободное серверное программное обеспечение категория программное обеспечение для linux категория программное обеспечение для macos