взаимная блокировка двух процессов нуждающихся двух ресурсах взаи мная блокиро вка ситуация многозадачной среде или субд при которой несколько процессов находятся состоянии ожидания ресурсов занятых друг другом ни один из них не может продолжать свое выполнение простейший пример взаимной блокировки шаг процесс процесс хочет захватить начинает хочет захватить начинает захватывает ресурс захватывает ресурс ожидает освобождения ресурса ожидает освобождения ресурса взаимная блокировка отладка взаимных блокировок как других ошибок синхронизации усложняется тем что для их возникновения нужны специфические условия одновременного выполнения нескольких процессов вышеописанном примере если бы процесс успел захватить ресурс до процесса то ошибка не произошла бы livelock это слово означает такую ситуацию система не застревает как обычной взаимной блокировке занимается бесполезной работой её состояние постоянно меняется но тем не менее она зациклилась не производит никакой полезной работы жизненный пример такой ситуации двое встречаются лицом лицу каждый из них пытается посторониться но они не расходятся несколько секунд сдвигаются одну ту же сторону обнаружение взаимных блокировок поиск взаимных блокировок осуществляется путём построения анализа графа ожидания графе ожидания узлами отмечаются процессы объекты блокировки отмечаются рёбрами направленными от узла захваченному объекту узлу захватившему его процессу ожидания отмечаются рёбрами направленными от узла ожидающему процессу узлу ожидаемому объекту цикл графе ожидания соответствует взаимной блокировке существует специальный алгоритм поиска циклов графе существуют алгоритмы удаления взаимной блокировки то же время выполнение алгоритмов поиска удаления взаимных блокировок может привести livelock взаимная блокировка образуется сбрасывается снова образуется снова сбрасывается так далее кроме того эти алгоритмы реализуются менеджером ресурсов программой отвечающей за блокировку разблокировку если же часть занятых блокировке ресурсов распределяется кем то другим обнаружение взаимной блокировки невозможно примеру субд oracle обнаруживает взаимную блокировку запросов её базам данных но если приведенном примере объекты это поле базы примеру файл на жестком диске взаимная блокировка обнаружена не будет субд этот файл не обрабатывает для неё взаимной блокировки нет практически об устранении взаимных блокировок надо заботиться ещё на этапе проектирования системы это единственный более менее надежный способ ними бороться крайнем случае когда основная концепция не допускает возможности избежать взаимных блокировок следует хотя бы строить все запросы ресурсов так чтобы такие блокировки безболезненно снимались предотвращение взаимной блокировки классический способ борьбы проблемой разработка иерархии блокировок установление правила что некоторые блокировки никогда не могут захватываться состоянии котором уже захвачены какие то другие блокировки говоря точно речь разработке отношения сравнения между блокировками запрете захвата большей блокировки состоянии когда уже захвачена меньшая некоторых случаях особенно поделенных на модули архитектурах это является проблемой так например межмодульном интерфейсе приходится вводить вызовы которые не делают ничего кроме захвата освобождения неких блокировок модуле такой подход используется файловых системах windows интерфейсе их взаимодействия подсистемами кэша виртуальной памяти прочие алгоритмы алгоритмы методы предотвращения взаимной блокировки название описание взаимное исключение алгоритм банкира это алгоритм обхода разработанный дейкстра предотвращение рекурсивных блокировки взаимное исключение это предотвращает поток от входа одну ту же блокировку несколько раз см также состояние гонки примечания ссылки deadlock detection agents paper deadlock detection in distributed object systems by nima kaveh and wolfgang emmerich article distributed deadlock detection by joanne holliday and amr el abbadi article deadlock detection in distributed databases by edgar knapp article advanced synchronization in java threads by scott oaks and henry wong paper confirmation of deadlock potentials detected by runtime analysis by saddek bensalem jean claude fernandez klaus havelund and laurent mounier coffman elphick and shoshani system deadlocks acm computing surveys paper eliminating receive livelock in an interrupt driven kernel by jeffrey mogul ramakrishnan deadlock at the portland pattern repository etymology of deadlock arcs web service approach to alleviating deadlock взаимные блокировки oracle литература категория ошибки категория управление конкурентными потоками