dhcpv это сетевой протокол для конфигурации узлов версии ipv протокола интернет ip адресами префиксами ip другими данными конфигурации которые необходимы для работы сети ipv это новая версия протокола dhcp для работы сетях на основе ipv узлы ipv могут автоматически генерировать ip адреса используя или протокол dhcpv может их присвоить используя данные конфигурации узлы ipv использующие могут запросить информацию кроме ip адреса или маршрута dhcpv может использоваться для получения этой информации даже если он не используется для получения ip адреса dhcpv не нужен для конфигурации узлов адресами серверов системы доменных имен dns потому что они могут быть используя протокол обнаружения соседних устройств ndp который также является механизмом многие маршрутизаторы ipv например маршрутизаторы для жилых сетей должны быть автоматически без вмешательства оператора такие маршрутизаторы требуют не только адреса ipv для использования связи восходящими но также префикса ipv для использования конфигурации устройств на нисходящей стороне маршрутизатора делегация префикса dhcpv обеспечивает механизм для конфигурации таких маршрутизаторов номера портов dhcpv использует udp номер порта для клиентов номер порта для серверов идентификаторы уникальный идентификатор dhcp каждый dhcp клиент dhcp сервер имеет duid dhcp сервер использует duid для идентификации dhcp клиета клиент использует уникальный идентификатор dhcp duid чтобы получить ip адрес от сервера dhcpv duid состоит из байтового поля типа duid первые битов поля идентификатора переменной длины до байтов его фактическая длина зависит от его типа сервер сравнивает duid со своей базой данных поставляет данные конфигурации адрес времена аренды адреса серверы dns клиенту значение оставшихся битов зависит от типа существуют следующие типы duid тип duid llt генерируется из адреса канального уровня интерфейса текущего времени для сетей ethernet качестве адреса канального уровня используется mac адрес тип duid en присваивается производителем оборудования тип duid ll генерируется из адреса канального уровня интерфейса тип duid uuid генерируется использованием uuid rfc клиентская опция адреса уровня ссылки rfc есть способ узел на основе его mac адреса эта опция была добавлена из за того что управлять многократными среде двойного стека трудно просто потому что для некоторых задач duid не удобен определяет путь dhcpv relay чтобы передать информацию серверу опция dhcpv relay еще широко не поддерживается но некоторые cisco brocade коммутаторы ее поддерживают пример этом примере link local адрес сервера fe ff fe link local адрес клиента fe aabb ccff fedd eeff клиент dhcpv отправляет solicit fe aabb ccff fedd eeff для fe ff fe сервер dhcpv отвечает advertise fe ff fe для fe aabb ccff fedd eeff клиент dhcpv отвечает пакетом request от fe aabb ccff fedd eeff для fe ff fe клиентские сообщения отправлены на групповой адрес соответствии разделом из rfc сервер dhcpv заканчивает работу ответом reply fe ff fe для fe aabb ccff fedd eeff ietf стандарты rfc dynamic host configuration protocol for ipv dhcpv updated by rfc rfc rfc dynamic host configuration protocol dhcpv options for session initiation protocol sip servers rfc ipv prefix options for dynamic host configuration protocol dhcp version rfc dns configuration options for dynamic host configuration protocol for ipv dhcpv rfc stateless dynamic host configuration protocol dhcp service for ipv rfc the dynamic host configuration protocol for ipv dhcpv client fully qualified domain name fqdn option rfc dhcpv leasequery rfc lightweight dhcpv relay agent ldra updates rfc errata rfc client link layer address option in dhcpv см также протокол обнаружения соседей категория tcp ip категория ipv