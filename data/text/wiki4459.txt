ruby рубин произносится ру би динамический рефлективный высокоуровневый язык язык обладает независимой от операционной системы реализацией многопоточности сильной динамической типизацией сборщиком мусора многими другими возможностями по особенностям синтаксиса он близок языкам perl eiffel по объектно подходу smalltalk также некоторые черты языка взяты из python lisp dylan клу реализация интерпретатора языка является полностью свободной история создания развития создатель ruby юкихиро мацумото matz интересовался языками ещё будучи студентом но идея разработке нового языка появилась позже ruby начал разрабатываться февраля года вышел свет году название навеяно языком perl многие особенности синтаксиса семантики из которого заимствованы ruby жемчужина рубин целью разработки было создание настоящего объектно лёгкого разработке языка из письма автора ruby родился февраля года тот день беседовал со своим коллегой возможности существования объектно сценарного языка знал perl perl не perl но он мне не нравился был нём некий привкус игрушечного языка да поныне есть объектно ориентированный язык казался многообещающим то время знал python но он мне не нравился потому что не считал его настоящим объектно ориентированным языком его oo свойства казались надстройкой над языком мне как языковому маньяку фанату объектно стажем очень очень хотелось чтобы был истинно объектно ориентированный простой использовании язык пытался найти такой язык но его не было тогда решил его создать прошло несколько месяцев прежде чем интерпретатор заработал добавил мой язык то что мне хотелось итераторы обработку исключений автоматическую сборку мусора затем переорганизовал свойства perl реализовал их как библиотеку классов декабре года опубликовал ruby японских новостных группах тех пор появились сайты списки рассылок списках рассылок идут жаркие обсуждения самый старый список сейчас содержит писем японии ruby стал популярным момента появления первой общедоступной версии году однако наличие документации только на японском языке сдерживало его дальнейшее распространение лишь году появилось описание ruby на английском языке году открылся форум ruby talk это положило начало росту известности языка остальном мире издано несколько книг на различных языках том числе на русском сейчас ruby входит большинство дистрибутивов ос linux поставляется вместе mac os доступен пользователям других операционных систем февраля года исполнился год момента анонса языка ruby такое событие разработчики решили отметить выпуском патча для ruby который назвали ruby хронология выхода версий списке ниже перечислены лишь наиболее крупные обновления название версии дата выхода примечания января первая версия указанная changelog ах декабря данная версия следовала сразу за версией выпущенной накануне номер после числа дата выпуска версии новые версии линейки выходили ещё год до alpha августа альфа версии выходили вплоть до октября alpha декабря следующая версия после alpha февраля вышла версия затем вплоть до середины выходили выпуски обозначением вида версия была выпущена но документации не отмечена июля данная версия следовала за версией модификации этой версии выходили вплоть до ноября pre декабря данная версия следовала за версией декабря была выпущена версия завершившая данную линейку stable декабря дальнейшем выходили модификации данной версии вплоть до версии выпущенной апреля года июня года была выпущена версия объявленная как финальная версия final июля года вышла переупакованная repacked версия development декабря отдельная ветка модификаций разрабатываемая независимо от линейки по аналогии ядром ос linux первая версия была объявлена как версия для разработки development version следовала за версией дальнейшем последовало множество промежуточных модификаций ruby ruby после чего от указания даты номере отказались выпустили alpha июля alpha июля beta августа stable августа данная версия появилась через несколько дней после выхода beta дальнейшем выходили новые модификации вплоть до версии вышедшей августа года development ноября данная линейка предназначалась исключительно для проверки различных нововведений при разработке модификации данной линейки доступны исключительно репозитории проекта соответственно сборки данной версии на официальный сервер не выкладывались stable сентября дальнейшем выпускались модификации этой версии вплоть до версии декабря сентября года был выпущен патч для версии development февраля данная линейка предназначалась исключительно для проверки различных нововведений при разработке модификации данной линейки доступны исключительно репозитории проекта соответственно сборки данной версии на официальный сервер не выкладывались stable августа дальнейшем последовало большое число модификаций которые выходят до сих пор января года например промежуточная версия вышла декабря года development декабря изначально ветка созданная для практической проверки ряда нововведений stable октября отличия от существенны stable февраля stable декабря stable декабря поддержка unicode добавлена сборка мусора для объектов типа symbol stable декабря добавлен новый оператор для упрощения обработки значений nil при обращении объектам реализована новая прагма frozen string literal позволяющая заморозить состояние строковых литералов исходных текстах stable декабря объединение fixnum bignum integer поддержка изменения регистра знаков юникода для string улучшения хеш таблиц st_table интерактивные сессии binding irb добавлен метод regexp match оптимизация array max array min stable декабря блоках do end теперь допустимо напрямую использовать секции rescue else ensure определён метод yield_self для выполнение операции yield блоком его контексте отличие от tap метод возвращает результат выполнения блока поддержка измерения покрытия тестовым кодом веток методов добавлены новые методы hash slice hash transform_keys включена автоматическая загрузка библиотеки pp rb без необходимости указания коде require pp изменён на обратный порядок вывод трассировки сообщения об ошибке вначале идут вызовы начиная со старых заканчивая свежими конце выводится сообщение об ошибке философия мацумото фанат объектно мечтал языке более мощном чем perl более объектно ориентированном чем python основное назначение ruby создание простых то же время понятных программ где важна не скорость работы программы малое время разработки понятность простота синтаксиса язык следует принципу наименьшей неожиданности программа должна вести себя так как ожидает программист однако контексте ruby это означает наименьшее удивление не при знакомстве языком при его основательном изучении сам мацумото утверждает что целью разработки была минимизация неожиданностей при для него но после распространения языка он удивлением узнал что мышление программистов похоже для многих из них принцип наименьшей неожиданности совпал его принципом ruby также унаследовал идеологию языка perl части предоставления программисту возможностей достижения одного того же результата несколькими различными способами люди различны им для свободы необходима возможность выбирать предпочитаю обеспечить много путей если это возможно но поощрять или вести пользователей чтобы выбрать лучший путь если это возможно одной из основных целей разработки было освобождение программистов от рутинной работы которую компьютер может выполнять быстрее качественнее особое внимание частности уделялось будничным рутинным занятиям обработка текстов для них язык настроен особенно хорошо противовес машинно ориентированным языкам работающим быстрее целью этой разработки был язык наиболее близкий человеку любая работа компьютером выполняется людьми для людей необходимо заботиться первую очередь затрачиваемых усилиях людей язык позволяет максимально быстро просто для человека выполнить задачу хотя возможно это потребует дополнительного времени работы компьютера принципы устройства языка иногда выделяются термин путь ruby хэл фултон выделяет такие принципы как просто но не слишком просто принцип наименьшего удивления вторичность скорости работы программы динамичность простые строгие правила выполнение которых не доходит до педантизма потребность создавать полезные красивые программы как причина целом они не имеют точной формулировки иногда этот термин используется для критики семантика ruby полностью объектно ориентированный язык нём все данные являются объектами отличие от многих других языков где существуют примитивные типы каждая функция метод ruby использует вызов по соиспользованию хотя сообществе ruby часто говорят что он использует вызов по ссылке для программиста привыкшего гибридным языкам некоторые эффекты такого решения могут показаться неожиданными например abcdefg abcdefg abcrefg то есть при изменении значения переменной неявно изменилось значение так как они содержат ссылку на один объект то есть механизм присваивания действует одинаково для всех объектов отличие от языков типа object pascal где присваивание может означать как копирование значения так копирование ссылки на значение ruby не поддерживает множественное наследование но вместо него есть мощный механизм примесей все классы напрямую или через другие классы выведены из класса следовательно любой объект может использовать определённые нём методы например процедурный стиль также поддерживается но все глобальные процедуры неявно являются закрытыми методами класса object ruby является языком он поддерживает процедурный стиль определение функций переменных вне классов объектно ориентированный всё объект функциональный анонимные функции замыкания возврат значения всеми инструкциями возврат функцией последнего вычисленного значения он поддерживает рефлексию информацию типах переменных на стадии выполнения см динамическая идентификация типа данных возможности ruby имеет лаконичный простой синтаксис частично разработанный под влиянием ада eiffel python позволяет обрабатывать исключения стиле java python позволяет переопределять операторы которые на самом деле являются методами полностью объектно ориентированный язык все данные ruby являются объектами понимании smalltalk например число это экземпляр класса единственное исключение управляющие конструкции которые ruby отличие от smalltalk не являются объектами также поддерживается добавление методов класс даже конкретный экземпляр во время выполнения программы не поддерживает множественное наследование но вместо него может использоваться концепция примесей основанная данном языке на механизме модулей содержит автоматический сборщик мусора он работает для всех объектов ruby том числе для внешних библиотек создавать расширения для ruby на си очень просто частично из за сборщика мусора частично из за несложного удобного api поддерживает замыкания полной привязкой переменным поддерживает блоки кода код заключается или do end блоки могут использоваться методах или замыкания целые переменные ruby автоматически конвертируются между типами разрядные больше разрядов зависимости от их значения что позволяет производить целочисленные математические расчёты со сколь угодно большой точностью не требует объявления переменных но для интерпретатора желательно чтобы переменным присваивалось пустое значение nil тогда интерпретатор знает что идентификатор обозначает переменную не имя метода язык использует простые соглашения для обозначения области видимости пример просто var локальная переменная var переменная экземпляра член или поле объекта класса var переменная класса var глобальная переменная ruby непосредственно языке реализованы многие шаблоны проектирования так например одиночка singleton может быть хотя не обязан реализован добавлением необходимых методов одному конкретному объекту см ниже может динамически загружать расширения если это позволяет операционная система имеет независимую от ос поддержку невытесняющей многопоточности перенесён на множество платформ он разрабатывался на linux но работает на многих версиях unix dos microsoft windows частности win mac os beos os примеры ruby есть немало оригинальных решений редко или вообще не встречающихся языках можно добавлять методы не только любые классы но любые объекты например вы можете добавить некоторой строке произвольный метод всё от символа до конца строки комментарий является оператором присваивания символы строка которой можно манипулировать средствами языка str привет здесь создаётся переменная str типа string def ключевое слово для объявления функции def str bye str указывает кому принадлежит метод по умолчанию object bye имя метода за ним может следовать необязательный заключённый круглые скобки список параметров функции пока из метода возвращается последнее вычисленное значение здесь строка end ключевым словом end заканчиваются практически все инструкции ruby puts метод str bye обращение методу bye объекта str значение полученное из метода bye передаётся методу puts который выводит на экран информацию puts str bye пока этот пример также демонстрирует как ruby можно использовать синглетон этом примере синглетоном является объект str любая конструкция ruby возвращает значение например конструкция if вычисляет выражение после него если оно истинно возвращает результат выражения между then else иначе между else end puts if then одно else другое end одно происходит присваивание значения переменной var операция присваивания возвращает значение переменной var которая выводится на экран puts var контейнеры работа массивами одна из сильных сторон ruby они автоматически изменяют размер могут содержать любые элементы язык предоставляет мощные средства для их обработки создаём массив hi hi обращение по индексу разворачиваем все внутренние массивы удаляем одинаковые элементы flatten uniq hi пытаемся найти индекс элемента со значением index nil неудача возвращается значение nil почти для всех функций предоставляется аналог тем же названием но заканчивающийся на который модифицирует контейнер flatten hi находим индекс первого элемента со значением index процедурные объекты итераторы языке есть эквивалентных способа записи блоков кода puts hello world do puts hello world end сопрограммы применяются большинством встроенных методов file open file txt file puts wrote some text конструкция устраняет закрытием файла закрывается здесь при любом исходе следующий пример показывает использование сопрограмм итераторов для работы массивами который показывает краткость записи на ruby многих достаточно сложных действий случайно выбираем из квадратов чисел от до распечатываем вместе индексами для работы требуется ruby collect select rand zero map with_index классы примеси методы перегрузка операторов следующий пример определяет класс именем person предназначенный для хранения информации об имени возрасте некоторой персоны class person between использованием классе variable переменная экземпляра count_obj переменная класса для подсчёта числа созданных объектов конструктор для создания объектов помощью new def initialize name age name age параметры метода название переменных объекта начинается name age name age создаём объекты count_obj увеличиваем счётчик на end def person переопределение оператора это даёт возможность использовать метод sort age person age из метода возвращается последнее вычисленное выражение end def to_s для вывода информации puts name age конструкция кавычках замещается ruby значением end def inspect похож на to_s но используется для вывода end пример добавляет методы для доступа переменным объекта attr_reader name age end создаём массив объектов group person new john person new markus person new ash здесь при работе irb автоматически вызывается метод inspect вызываем методы массива сортировка разворачивание его обратном порядке puts group sort reverse печатает markus john ash обращаемся функции которая была добавлена автоматически используя при включении comparable group between group group true исключения исключения возбуждаются помощью конструкции raise или fail опционально могут быть добавлены текст сообщением тип исключения информация стеке вызовов raise argumenterror неверный аргумент caller caller метод возвращающий текущий стек выполнения обрабатываются исключения использованием конструкции rescue опционально можно указать тип обрабатываемого исключения по умолчанию обрабатываются все получение информации также можно добавлять блоки else выполняется если исключения отсутствовали ensure выполняется любом случае begin rescue runtimeerror обрабатываем конкретный тип ошибок puts напечатаем сообщение об ошибке rescue можно писать rescue чтобы получить объект исключения обрабатываем все исключения else сработает если исключений не было ensure сработает любом случае end реализация для ruby существуют несколько реализаций официальный интерпретатор написанный на си jruby реализация для java интерпретатор для платформы net ironruby rubinius написанная основном на ruby базирующаяся на идеях smalltalk vm maglev другая базирующаяся на smalltalk разработка от компании gemstone blue ruby реализация ruby для виртуальной машины abap macruby реализация для mac os фокусом на максимальную интеграцию возможностями операционной системы mruby реализация для встраивания программы официальный интерпретатор портирован под большинство платформ включая unix microsoft windows том числе windows ce dos mac os os amiga beos syllable acorn risc os другие для windows существует установщик rubyinstaller есть возможность запуска под cygwin для большей совместимости unix интерактивный ruby официальной версией интерпретатора ruby поставляется командная оболочка ruby interactive ruby shell запускаемая командой irb окне терминала интерфейсе командной строки она позволяет тестировать код программы очень быстро построчно irb irb main hello world hello world irb main оператор возведения степень программа irb выводит результат каждой строки после символов приведённых выше примерах для наглядности применяется аннотирование результаты строк программы записываются комментариях после имитацию irb можно запустить непосредственно браузере поставке дистрибутива one click installer для windows начиная версии поставляется утилита fxri которая включает себя справочную систему ri интерактивный интерпретатор irb поддержка интегрированных сред разработки базовые возможности редактирования добавляются ко многим редакторам emacs bred vim jedit nano scite kate др здесь перечислены только ide предоставляющие обширный набор функций название лицензия платформы ссылка activestate komodo ide проприетарная linux mac os solaris windows arachno ruby ide проприетарная win xp linux aptana radrails rdt gpl apl cpl java easyeclipse for ruby and rails win xp linux mac os eclipse rdt epl cpl java embarcadero turboruby проприетарная windows os linux freeride ruby license windows os posix intellij idea ruby plugin проприетарная на idea apache на сам plugin java jruby ruby plugin kdevelop gnu gpl linux komodo edit проприетарная windows mac linux mondrian ruby ide разработка прекращена доступна старая версия mit ruby fox toolkit netbeans ide версия более ранние cddl java rde ruby license windows ruby in steel проприетарная visual studio rubymine проприетарная на базе idea java visual studio реализация ironruby проприетарная windows xcode проприетарная mac os библиотеки стандартная библиотека кроме мощных возможностей встроенных язык ruby поставляется большой стандартной библиотекой это прежде всего библиотеки для работы различными сетевыми протоколами на стороне сервера клиента средства для работы различными форматами представления данных xml xslt yaml pdf rss csv wsdl кроме встроенных язык средств отладки ruby поставляются библиотеки для модульного тестирования журналирования профилирования также есть библиотеки для работы архивами датами кодировками матрицами средства для системного распределённых вычислений поддержки многопоточности основные встроенные классы ruby название описание версия вершина иерархии классов ruby array динамический массив для хранения произвольных объектов индексируемый объекты сохраняют контекст выполнения некоторого участка кода значение переменных методов может позже использоваться для выполнения вычислений этом контексте объект сохраняет адрес возврата контекст выполнения позволяя выполнить переход точку создания из любого места программы нелокальный переход обёртка вокруг указателя си используется основном при написании расширений представление каталогов файловой системы предоставляет возможности для просмотра каталогов их атрибутов базовый класс всех исключений образует вершину иерархии более чем исключений falseclass глобальная переменная false является единственной переменной этого класса представляет логическую ложь булевских выражениях коллекция пар ключ значение порядок обхода не зависит от порядка вставки базовые возможности ввода вывода класс для доступа файлам до matchingdata результат применения регулярного выражения обычно используется не напрямую через специальные переменные метод ассоциированный конкретным объектом не классом может использоваться для вызова этого метода без наличия объекта класс модулей class класс классов классы ruby являются объектами class является классом этих объектов метаклассом nilclass единственным экземпляром класса является переменная nil только nil false представляют ложь программах любой другой объект представляет собой истину абстрактный класс чисел абстрактный класс целых чисел может трактоваться как бесконечная битовая строка для битовых операций целые числа ограниченные только количеством памяти конвертируется fixnum автоматически если значение может быть размещено них наоборот до версии целые числа которые могут быть размещены машинном слове бита для большинства машин если результат операции выходит за рамки автоматически преобразуется bignum до версии числа плавающей запятой proc блок кода со связанным ним контекстом замыкание который может выполняться неоднократно других контекстах range интервал множество значений заданных начальным конечным элементами регулярное выражение строка байт произвольной длины struct предоставляет простой способ связывания атрибутов вместе без написания кода класса напрямую генерирует специальные классы содержащие множество переменных методов доступа представляет имя создаётся при использовании синтаксиса name все объекты данным именем созданные программе ссылки на один объект инкапсулирует информацию потоке включая основной поток скрипта ruby предоставляет способ управления группой потоков поток может принадлежать только одной threadgroup добавление потока новой группе удаляет его из любой предыдущей дата время trueclass глобальная переменная true является единственной переменной класса представляет логическую истину булевских выражениях метод не связанный конкретным объектом может привязываться объекту вызываться как method расширения языке ruby осуществлён простой удобный механизм для расширения языка помощью библиотек написанных на си позволяющий легко разрабатывать дополнительные библиотеки для доступа базам данных разработана библиотека ruby dbi поддерживает sqlite oracle database odbc mysql db ms sql interbase ado др также существуют библиотеки для конкретных баз данных поддерживающих специфические для них операции для реализации orm существуют несколько библиотек такие как activerecord mongoid datamapper или sequel среди графических библиотек fxruby интерфейс графической библиотеке fox графический пакет разработчика wxruby интерфейс пакету wxwidgets на qtruby korundum привязка qt kde соответственно графические библиотеки для работы tk gtk также реализована библиотека для работы opengl позволяющая программировать трёхмерную графику win utils позволяет обращаться специфическим возможностям win api rmagick библиотека для работы изображениями поддерживающая более форматов основана на imagemagick graphicsmagick библиотека ruport ruby reports предназначена для лёгкой реализации отчётов создания диаграмм на основе данных из бд или прямо из текстовых файлов csv причём результаты можно сохранять форматах pdf html csv txt rutils обработчик русского текста на ruby позволяет реализовать сумму прописью выбор числительного например propisju двести тридцать одна или propisju_items чемодан чемодана чемоданов триста сорок один чемодан также перевод транслит работу датами для управления библиотеками программами ruby виде самодостаточных пакетов предназначена система управления пакетами rubygems драгоценный камень существует всемирный репозиторий программного обеспечения ruby raa ruby application archive репозиторий по состоянию на сентябрь года насчитывает более полутора тысяч проектов большое количество программного обеспечения написанного на ruby пользуются хостингом проекта rubyforge созданного специально этой целью мая года rubyforge закрыт архив программ при этом останется доступен для скачивания файл freeride ss jpg thumb px freeride ide для ruby реализованная использованием библиотеки fxruby большинство расширений под свободными лицензиями lgpl лицензия ruby могут быть использованы любом проекте практически без ограничений документация система rdoc предназначена для автоматического извлечения документации из исходных кодов программ на ruby её дальнейшей обработки является стандартом де факто для подготовки документации по программному обеспечению написанному на ruby для доступа документации ruby из командной строки unix разработана программа ri её помощью можно получить информацию модулях классах методах ruby использование ruby используется nasa noaa национальная администрация по океану атмосфере motorola других крупных организациях следующие программы используют ruby как скриптовый язык для расширения возможностей программы или написаны на нём частично или полностью rpg maker rpg maker xp rgss ruby game scripting system amarok sketchup inkscape скрипты для обработки векторных изображений metasploit chef puppet системы управления конфигурациями redmine багтрекер xchat для koffice разрабатывается проект kross механизм для поддержки скриптов который включает ruby watir свободное средство для автоматического тестирования веб приложений браузере toptal используется ruby чтобы создать архитектуру microservices vagrant travis ci github разработка мобильных приложений titanium studio среда разработки мобильных приложений на html css javascript ruby rails python php ruboto среда разработки android приложений на ruby rubymotion среда разработки ios приложений на ruby mobiruby инструмент разработки android ios приложений на ruby фреймворк для разработки enteprise mobility приложений для смартфонов устройств motorola см также interactive ruby shell ruby on rails фреймворк для создания веб приложений rubygems менеджер пакетов для ruby ironruby реализация языка ruby на платформе microsoft net сравнение языков примечания литература на русском языке электронном формате мацумото ruby руководство пользователя ruby user guide пер на русский александр мячков на opennet пайн учись программировать learn to program пер на русский михаил шохирев охотников ruby новые грани из журнала rsdn magazine образовательный ресурс посвящённый ruby на сайте мфти на английском языке электронном формате programming ruby the pragmatic programmer guide часто упоминаемая книга по ruby охватывающая основные стороны на этом языке the little book of ruby pdf ссылки официальный сайт ruby репозиторий пакетов gem для менеджера пакетов rubygems категория языки веб категория скриптовые языки категория объектно ориентированные языки категория языки динамической типизацией категория свободные компиляторы интерпретаторы категория высокоуровневые языки