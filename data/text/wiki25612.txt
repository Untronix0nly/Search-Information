ntldr сокращение от загрузчик операционных систем windows nt ntldr может быть запущен как переносного устройства такого как например cd rom или флэш накопителя usb так жёсткого диска ntldr также способен загружать операционные системы не основанные на технологии nt путём задания загрузочного сектора отдельном файле для запуска ntldr требуется как минимум наличие следующих двух файлов на активном разделе ntldr который собственно содержит код загрузчика boot ini котором записаны команды для формирования меню выбора системы параметры для её запуска чтобы загружать операционные системы на базе windows nt необходимо также наличие файла ntdetect com процесс запуска при загрузке ntldr выполняет следующие шаги переводит процессор плоский битный режим работы организует доступ текущей файловой системе если присутствует файл hiberfil sys загрузчик обнаруживает образ спящего режима содержимое образа загружается оперативную память система предыдущее состояние противном случае он читает файл boot ini выводит пользователю соответствующее меню для выбора запускаемой операционной системы если была выбрана не система семейства windows nt например windows тогда он загружает файл указанный boot ini bootsect dos если не указан иной файл являющийся полноценной загрузочной записью управление передаётся этому файлу либо он загружает операционную систему на базе dos если же была выбрана система на базе windows nt то запускается программа ntdetect com которая собирает информацию составе оборудования запускает файл ntoskrnl exe ядро операционной системы передавая ему собранную информацию составе оборудования после чего происходит собственно запуск операционной системы настройки локализованная версия загрузчика как уже было сказано ntldr позволяет пользователю выбрать желаемую операционную систему для запуска из меню также для операционных систем windows nt более поздних могут быть указаны дополнительные опции загрузки ядра все эти настройки хранятся файле boot ini который должен находиться корне того же логического диска что ntldr для формирования меню показанного выше был использован файл boot ini следующего содержания boot loader timeout default multi disk rdisk partition windows operating systems multi disk rdisk partition windows windows server enterprise ru noexecute optout fastdetect multi disk rdisk partition windows microsoft windows xp professional ru noexecute optin fastdetect microsoft windows секции boot loader параметр timeout указывает время секундах течение которого будет отображаться данное меню если установить значение то меню отображаться не будет сразу запустится операционная система заданная параметре default данном примере параметр равен значит пользователя будет секунд для выбора операционной системы из предложенного списка разрешённые опции загрузки ядра windows nt gb basevideo baudrate число crashdebug debug debugport comn hal имя_файла kernel имя_файла maxmem nn nodebug noserialmice comn numproc число onecpu pcilock sos win win do windows gb basevideo baudrate число bootlog crashdebug debug debugport comn fastdetect comn hal имя_файла kernel имя_файла maxmem nn nodebug numproc число pae safeboot параметр sos windows xp gb basevideo baudrate число bootlog bootlogo break burnmemory число channel clklvl cmdcons crashdebug debug debugport comn execute fastdetect comn intaffinity hal имя_файла kernel имя_файла lastknowngood maxmem nn minint nodebug noexecute noguiboot nolowmem nopae noserialmice comn numproc число onecpu pae pcilock rdpath redirect safeboot параметр scsiordinal параметр sdiboot sos timeres userva win win dos year описание gb ключ меняет стандартное распределение между приложением системой виртуальной адресации windows nt то есть приложение получит своё распоряжение гигабайта памяти система один предоставление большей виртуальной памяти прикладным программам интенсивно использующим память подобно серверам баз данных может улучшить их однако чтобы приложение смогло использовать это преимущество оно должно быть помечено как приложение gb aware этот параметр появился третьем пакете обновления для windows nt существует на всех более поздних версиях basevideo ключ заставляет систему использовать стандартный драйвер vga графическом режиме baudrate число ключ включает режим отладки ядра определяет скорость порта по умолчанию бод по которой будет подключаться удаленный узел отладки при установке этого параметра автоматически включается параметр debug пример baudrate bootlog ключ включает режим записи протокола загрузки файл systemroot ntbtlog txt протокол записываются детали загрузки драйверов пример протокола microsoft windows nt version loaded driver winnt system ntoskrnl exe loaded driver winnt system hal dll loaded driver winnt system bootvid dll loaded driver pci sys loaded driver isapnp sys loaded driver intelide sys burnmemory эта опция заставит систему использовать меньшее количество оперативной памяти чем физически доступное системе значение задаётся мегабайтах пример burnmemory указывает системе не использовать мегабайт оперативной памяти microsoft рекомендует использовать эту опцию вместо maxmem для воспроизведения поведения системы приложений условиях нехватки оперативной памяти channel используется совместно параметрами debug debugport целях поддержки порта ieee crashdebug загружает отладчик ядра память где он остается до тех пор пока не возникнет ошибка ядра debug загружает отладчик ядра память этот параметр может быть активирован любой момент из удаленного отладчика расположенного на компьютере который подключен порту локального компьютера отличие от параметра crashdebug при использовании параметра debug порт всегда работает как порт отладки этот режим используется если работе системы регулярно возникают ошибки debugport comx задаёт com порт для отладки execute отключает предотвращение выполнения данных physical address extension windows server sp fastdetect comn ключ заставляет ntdetect com пропустить поиск оборудования на определённых com портах при загрузке windows можно указывать номера портов для которых надо отключить поиск устройств через запятую при пропуске значения параметра поиск устройств будет отключен для всех портов hal имя_файла задаёт слой аппаратных абстракций явное указание параметра переопределяет значение указанное при установке например таким образом можно проводить тестирование программного обеспечения на предмет системах разным количеством ядер центрального процессора не прибегая переустановке windows nt или использованию виртуальных машин intaffinity определяет использование слоя аппаратных абстракций halmps dll для распределения прерываний например назначение прерывания системе только процессору имеющему высший приоритет без этого ключа слой аппаратных абстракций обычным образом разрешает всем процессорам получать прерывание kernel имя_файла указывает загрузчику какое ядро следует загружать например kernel ntkrnlmp exe загрузка ядра памятью меньше гб maxmem эта опция ограничивает для nt использование памяти число мбайт пример maxmem ограничил бы nt мб системной памяти hal win halmps dll имеет способность работе системами которые составлены из кластеров свою очередь состоящих из малых систем например если имеется процессорная система которая составлена из двух процессорных кластеров то id каждого процессора должен быть определен ориентируемым кластером через hal размер максимального кластера значение по умолчанию система не основана на кластерах пример nodebug запрещает использование любой отладочной информации noexecute определяет уровень dep появилась начиная windows xp sp может принимать четыре значения alwayson alwaysoff optin optout optin данное значение используется по умолчанию на компьютерах оснащенных процессорами поддержкой dep функция dep включена по умолчанию для ограниченного числа системных файлов программ при этом по умолчанию защищаются только системные файлы windows optout по умолчанию функция dep включена для всех процессов диалоговом окне система панели управления можно вручную создать список приложений для которых следует отключить dep специалисты по информационным технологиям могут воспользоваться пакетом средств обеспечения совместимости приложений application compatibility toolkit чтобы отключить функцию dep для одной или нескольких программ при этом вступают силу исправления обеспечивающие совместимость программ для функции dep alwayson функция dep включается для всей системы все процессы работают выполнением проверок dep этом режиме нельзя отключить функцию dep для отдельных приложений исправления обеспечивающие совместимость программ для функции dep силу не вступают программы для которых помощью пакета средств обеспечения совместимости приложений было отключено использование функции dep также работают выполнением проверок dep alwaysoff функция dep отключена для всей системы независимо от наличия аппаратной поддержки dep процессор не работает режиме pae если файле boot ini не указан параметр pae noguiboot когда эта опция задана vga драйвер ответственный за представление графики во время загрузки win не этот драйвер используется для отображения на экране монитора процесса загрузки как правило для отображения blue screen таким образом включение этой опции boot ini сделает всё это невозможным nopae загружает версию ядра nt без расширения физических адресов pae noserialmice отключает обнаружение мыши подключенной com порту портам numproc допускается только число указанных центральных процессоров пример numproc на системе процессорами заставит из этих процессоров простаивать под nt onecpu эта опция указывает nt использовать только один процессор системы pae загружает версию ядра nt расширением физических адресов pae pcilock запрещает windows nt динамически назначать io irq ресурсы на pci устройства оставляет конфигурацию bios perfmem perfpages эти опции не поддерживаются final release так как они используются nt для резервирования физической памяти для basic block testing bbt существует только одно известное упоминание bbt на сайте microsoft судебное дело сша против microsoft от го февраля года нём рассказывается том как jim allchin отвечал под присягой на вопросы по поводу bbt он сказал что bbt вещь оптимизирующая системы microsoft использует её пререлизах для того чтобы минимизировать количество страниц памяти perfmem определяет резервирование физической памяти mb perfpages количество страниц памяти эти параметры не должны присутствовать совместно место для bbt резервируется thread environment block teb каждого потока на самом деле точно не известно как конкретно влияет каждый из параметров на работу системы safeboot используется крайне редко так как выполняет те же действия что при нажатии для загрузки безопасном режиме ntldr но вы можете определить один из трех дополнительных ключей minimal network или dsrepair minimal network отвечают за загрузку ос безопасном режиме без поддержкой сети соответственно безопасном режиме nt загружает только драйверы сервисы описанные по имени или группе minimal или network ключах реестра hklm system control safeboot ключ dsrepair directory services repair указывает nt что необходимо грузиться режиме который восстанавливает active directory из резервной копии дополнительная опция которую можно определить alternateshell она указывает ядру nt какую программу описанную реестре hklm system control safeboot alternateshell использовать качестве графической оболочки взамен explorer используемого по умолчанию sos заставляет nt выдавать во время загрузки всю информацию относительно того какие драйверы загружены насколько успешно timeres на hal halmps dll эта опция установит разрешающую способность системного таймера параметр число сотнях наносекунд его значение будет установлено ближайшим меньшим который поддерживает hal заданная по умолчанию разрешающая способность мс пример timeres установил бы таймер на разрешение мс use этот параметр предназначен для систем со старым bios он говорит nt hal что необходимо использовать чип таймера качестве основного usepmtimer параметр указывает на то что операционные системы windows xp windows server используют параметры таймера pm timer не параметры счетчика отметок времени если процессор поддерживает параметры таймера pm_timer userva xxxx параметр позволяет выполнять тонкую настройку объёма виртуальной памяти для режима пользователя виртуальной памяти системы семействе windows server он используется совместно параметром gb файле boot ini позволяет варьировать объём виртуальной памяти режиме пользователя пределах между гб разницу за вычетом xxxx отдавать обратно режиму ядра year опция очевидно предназначена для проверки на соответствие определение этого параметра говорит ядру nt что необходимо игнорировать год сообщаемый системным таймером компьютера вместо этого использовать определенный boot ini таким образом год используемый boot ini воздействует на все программное обеспечение системе включая ядро nt пример year примечание эта опция доступна только на nt sp windows см также boot ini coreboot начальная загрузка компьютера примечания ссылки подробное описание функции предотвращения выполнения данных редактирование файла boot ini windows server назначение файла boot ini windows xp параметры используемые файле boot ini windows xp windows server категория стандартные приложения windows категория загрузчики операционных систем