postscript постскрипт язык описания страниц основном используемый настольных издательских системах идеология postscript был разработан джоном уорноком чаком гешке из adobe systems начале гг исходно postscript использовался как ядро механизма печати компьютеров apple но вскоре стал широко для большинства компьютерных систем интерпретаторы postscript виде программных или аппаратных компонентов для печати документов присутствуют практически во всех современных компьютерных системах postscript используется модель изображения текста или рисунков на чистой странице когда страница готова она выводится на печать начинается прорисовка изображения очередной страницы это есть ни что иное как метод компиляции каждый документ postscript обычно представляет собой программу которая печатает на принтере или отображает на экране монитора следующие друг за другом страницы история концепция языка postscript была заложена году джоном уорноком john warnock сотрудником evans and sutherland computer corporation его коллега джон гэфни john gaffney занимавшийся тогда интерпретатором для большой базы данных трёхмерной графики нью йоркского порта создал язык design system очень похожий на forth позже джон уорнок перешёл центр xerox пало альто xerox вместе мартином ньювелом martin newell создал на базе design system новую систему jam john and martin исследованиях печати развившейся interpress протокол печати xerox году джон уорнок уволился из xerox вместе чаком гешке chuck geschke основал adobe systems inc вначале их целью было создание рабочей станции для печати которая должна была называться postscript но они вскоре поняли что лучше усилия на разработке средств для управления принтерами сторонних производителей году увидел свет postscript позже названию было добавлено level чтобы отличать его от level см ретроним postscript имел ряд преимуществ перед другими системами того времени один тот же файл мог печататься как на лазерном принтере выдававшем тогда dpi так на фотонаборном устройстве dpi наилучшим качеством каждом случае любой производитель мог лицензировать интерпретатор postscript использовать postscript со своим устройством спецификации postscript были общедоступны таким образом любой разработчик мог писать программы поддерживающие postscript adobe рисковала выпуская postscript возможно ей не удалось бы убедить рынок необходимости такого языка если бы не стив джобс из apple computer году продажи компьютеров macintosh начали падать apple нужен был killer app нечто что мог бы только её компьютер стив джобс инвестировал миллиона долларов adobe которая создала postscript контроллер для принтера apple laserwriter aldus создавшую программу pagemaker использовавшую все возможности macintosh laserwriter появившаяся тогда возможность допечатной подготовки на компьютере спасла apple превратила adobe aldus крупные компании другие производители фотонаборной аппаратуры начиная linotype оценили postscript вскоре оснастили свою фотонаборную аппаратуру postscript postscript стал стандартом области допечатной подготовки adobe выпустила следующую ревизию postscript postscript level это была значительная переработка давно ожидавшаяся издательским сообществом основными улучшениями были увеличенная скорость надёжность основном это коснулось управления памятью поддержка цветоделения самом контроллере распаковка сжатых изображений самом контроллере jpeg ccitt group поддержка больших наборов шрифтов для азиатских стран кэширование шрифтов изображений улучшенные драйверы улучшенные алгоритмы печати изображения accurate screening adobe совершила ошибку обнародовав спецификации postscript level до начала работ по его аппаратной реализации конкуренты неожиданно вышли на рынок эмуляторами postscript level раньше самой adobe результате потребовалось очень много времени прежде чем приложения начали использовать все новые функции postscript level такая функция как цветоделение контроллере до сих пор не поддерживается xpress хотя момента выхода level прошло много лет году adobe ввела новый стандарт postscript изменения по сравнению level незначительны это можно понять учитывая что множество приложений до сих пор не могут обеспечить полную поддержку postscript level основные преимущества postscript поддержка уровней на один цвет бит на цвет до того было оттенков бит на цвет поддержка pdf контроллеры ps level могут выводить pdf наряду файлами ps level расширенная поддержка цветоделения контроллеры ps могут производить цветоделение изображений заданных оттенках серого или шести цветах добавлена интернет web ready printing пока что никто из oem партнёров adobe не реализовал её область применения postscript соединил себе лучшие возможности принтеров плоттеров подобно плоттерам postscript предоставляет возможность вывода векторной графики единый язык управления который может быть использован любым производителем принтеров подобно матричным принтерам postscript предлагает удобные возможности по печати растровой графики текста отличие от тех других postscript может совмещать все эти типы вывода на одной странице давая намного больше гибкости чем до этого имел любой принтер или плоттер postscript больше чем типичный язык управления принтером он является языком многие прикладные программы могут преобразовать документ postscript программу при выполнении которой будет получен начальный документ эта программа может быть послана непосредственно на принтер поддержкой postscript или преобразована интерпретатором postscript другой формат для принтеров без поддержки postscript или результат её выполнения интерпретатором может быть показан на экране так как исходная postscript программа одна та же postscript называется независимым от устройства большинство принтеров плоттеров имеют встроенный интерпретатор языка postscript то же время простые принтеры домашнего класса поддерживают только элементарные графические операции поэтому задача создания растрового изображения возлагается на центральный процессор существуют интерпретаторы языка postscript для различных операционных систем наиболее известный из них свободная программа ghostscript имеется коммерческая версия системы тех bakoma tex написанная полностью на postscript автор малышев ссср язык postscript тьюринг полный язык хотя программы на postscript создаются основном не людьми другими программами принципе ничто не мешает писать на нём программы для обсчёта графики реализации численных методов решения математических задач postscript стековый язык похожий на форт синтаксис языка использует обратную польскую нотацию что делает ненужным использование скобок однако требует некоторой практики для чтения текста программы из за необходимости держать голове содержимое стека большинство операторов берут операнды из стека помещают результат вычислений стек литералы строки числа помещают свою копию стек postscript для рисования используется двумерная прямоугольная система координат начало которой совпадает левым нижним углом страницы ось по умолчанию направлена горизонтально то есть по ширине страницы ось вертикально единицей измерения линейных координат служит типографский пункт помощью операторов языка pp начало системы координат может быть перенесено любую точку оператор translate сама система повернута на произвольный угол плоскости страницы оператор rotate масштаб по каждой из двух осей помощью оператора scale также может быть изменен например зеркальный вывод изображения на пленку emulsion down postscript принтерах осуществляется при помощи одного единственного оператора scale задающего отрицательный масштаб по одной из осей системы координат например scale postscript имеет черты метафайла совмещая поддержку как векторных так растровых изображений шрифты postscript только векторные немного особняком стоят type шрифты которых для рисования глифов процедура buildglyph может быть использована любая процедура терминах языка postscript pp после выхода sp для windows nt году см также http support microsoft com gp lifesupsps при установленном системе adobe type manager драйвере adobeps все шрифты не roman кодировке частности кириллица выгружались postscript файл виде type шрифтов где каждый глиф был представлен виде растрового изображения разрешения выгрузка шрифта виде растровых изображений создала много проблем при подготовке выводу на фотонабор допечатной подготовке вообще эта ошибка была исправлена adobeps adobe type manager которые затем вошли дистрибутив windows структура документа структура файла postscript формируется структурными комментариями структурные комментарии начинаются символов начале строки файл postscript состоит из четырёх частей заголовка пролога тела эпилога заголовок начинается строкой ps adobe где версия спецификации далее идут структурные комментарии общими свойствами документа заканчивается заголовок строкой endcomments ps adobe creator dvips copyright radical eye software title rep dvi pages pageorder ascend boundingbox endcomments прологе обычно содержатся описания подпрограмм данные необходимые для печати документа например процедуры шрифты пролог заканчивается комментарием endprolog теле программы содержатся команды отвечающие за отрисовку каждой страницы предваряемые строкой page где метка страницы которая не выводится на печать порядковый номер страницы файле например page iii после команд отрисовки всех страниц идёт структурный комментарий trailer после чего начинается эпилог эпилоге можно продублировать комментарии из заголовка это реализовано на случай если начале вывода программе ещё не известно например число страниц этом случае вместо числовых значений параметров заголовке надо писать atend заканчивается файл строкой eof обзор элементов языка стеки postscript для хранения данных разных типов используются четыре стека стек операндов стек графических контекстов стек исполнения стек словарей типы данных основные типы данных языка postscript целое число со знаком вещественное число логическое выражение true или false строка символов массив процедура словарь имя операторы операторы postscript получают операнды параметры вынимая их из стека записывают результаты действий если они есть также стек такой стиль при котором операнды задаются до операции над ними оператора называется постфиксной нотацией например для сложения двух заданных чисел необходимо вначале поместить их вершину стека операндов затем выполнить команду add которая извлечёт из стека два элемента помещённые последними то есть заданные числа сложит их запишет результат стек откуда он сможет быть извлечён другой операцией качестве операнда это записывается так add операторы postscript можно разделить на несколько групп это операторы для работы содержимым стека независимо от типа арифметические операции операторы работы массивами работы со словарями работы со строками сравнения управления потоком команд работы типом аргументов преобразования доступа работы файлами работы виртуальной памятью графического состояния другие описания операторов postscript можно найти краткие описания наиболее употребительных операторов на русском языке можно найти краткий обзор механизма рисования изображения процесс рисования растрирования при выполнении интерпретации postscript программы заключается вычислении для каждого пиксела устройства вывода одного для монохромного или нескольких например четырёх для cmyk устройства или шести для cmykorgr значений параметра ов диапазоне от до вычисленное значение параметра ов используется качестве аргумента ещё одной важной функции transfer function pp русскоязычный синоним отображение по умолчанию подавляющем большинстве случаев эта функция представляет собой простейшую функцию её значение тождественно равно значению аргумента однако ряде случаев например для компенсации растискивания используются достаточно сложные нелинейные зависимости задаваемые кусочной либо табличной аппроксимацией кусочно линейная аппроксимация transfer function используется например eps ps файлах adobe photoshop для аппроксимации используется разбивка области определения на сорок участков шагом растровой точки на каждом из сорока участков transfer function имеет вид transfer function вида терминах postscript language sub neg settransfer обращает изображение делая из него негатив именно таким образом печатают негатив postscript принтеры для монохромных устройств например для фотонабора решение закрашивании засветке пикселя может приниматься результате сравнения вычисленного для данного пиксела значения transfer function значения spot функции либо двумерного массива threshold array pp случае если значение transfer function больше значения spot функции или элемента threshold array для этого пиксела последний закрашивается засвечивается специальный подбор transfer function spot функции или threshold array позволяет получить отношение числа закрашенных незакрашенных пикселей устройства вывода для каждого пиксела исходного растрируемого изображения таким что на оттиске отпечатке средняя яркость участка изображения почти пропорциональна значению вычисленного параметра см выше подобным образом формируются точки различного размера из которых состоит полутоновое изображение на типографских оттисках газетах журналах книгах пример программы ps adobe по умолчанию постскрипт использует единицу измерения пункт дюйма нам нравятся миллиметры div мм пунктов dup дублировать значение на вершине стека scale растянуть это количество раз по обеим координатам translate установить начало координат мм мм times roman findfont взять шрифт times roman scalefont растянуть до размера нас мм setfont установить выбранный шрифт цикл для углов от до шагом gsave запомнить текущее преобразование координат rotate повернуть систему координат угол градусах берём вершины стека moveto перейти точку мм мм wikipedia show написать слово текущим шрифтом grestore вернуть преобразование координат for конец цикла for showpage вывести страницу вывод программы вывод программы обработка шрифтов почти столь же сложно как сам postscript его обращение шрифтами система шрифтов использует графические примитивы ps для рисования глифов кривыми линиями которые затем могут быть отображены любым разрешением ряд типографских вопросов возникает при этом подходе одна из проблем что шрифты не масштабируются линейно при небольших размерах решается включением хинтинга то время когда технология включения хинтов шрифтах строго охранялась хинтованные шрифты были закодированы сжаты то что adobe называла фонт type который известен также как ps или adobe type type был скорее средством для хранения исключительно информации об очерчивании символов чем полноценным языком pdf подобен этом отношении adobe затем начала продавать лицензии на технологию type тем кто хотел добавлять хинты своим шрифтам те кто не лицензировал эту технологию остались шрифтом type шрифты type позволяли применение всей сложности языка postscript но без стандартного подхода хинтам шрифт type который предназначен для использования форматом compact font cff был реализован чтобы уменьшить общий размер файла шрифта позже он стал основой для обращения opentype шрифтами для того чтобы конкурировать системой adobe apple разработал году свои собственные truetype системы сразу после объявления truetype adobe опубликовала спецификации для формата type тех пор появилось много бесплатных шрифтов type например шрифты используемые системой верстки tex доступны этом формате конце годов adobe присоединилась microsoft разработке opentype по существу это было объединение расширение форматов type truetype при печати на выходе postscript устройства избыточные части opentype шрифта опускаются то что посылается драйверу печатающего устройства не отличается от того что выдается truetype или type шрифтами cid индексированные шрифты формат cid индексированных сокращение для character identified шрифтов был разработан чтобы решить проблему адресации глифов иероглифических языках очень большим числом символов китайский корейский японский этот формат может быть использован форматом type для стандартных cid индексированных шрифтов или type для cid индексированных opentype шрифтов каждый глиф элемента коллекции символов уникальным индексом символа cid этой кодировке который может не совпадать кодом символа например unicode коллекции символов уникально называются регистри упорядочением дополнением например adobe japan регистри обозначает разработчика например adobe упорядочение раскрывает цель набора символов например japan дополнительный номер например указывает часто на объем коллекции например коллекция adobe japan составляет глифа adobe japan глифов шрифты ключом cid могут быть сделаны без ссылки на коллекцию символов используя кодировку identity такую как identity для горизонтальной записи или identity для вертикальных такие шрифты могут иметь уникальный набор символов этом случае номер cid глифа не является информативным обычно вместо этого используется кодировка unicode потенциально дополнительной информацией технология adobe clearscan создает шрифты type cid для соответствия визуальному оформлению документа после оптического распознавания символов ocr clearscan acrobat не заменяет шрифты на системные шрифты или на type mm как acrobat более ранних версиях использует эти вновь созданные шрифты шрифты встроены embedded файл pdf это очевидно обязательно тенденции перспективы настоящее время помимо postscript на рынке лазерных принтеров широкое распространение получил язык управления принтером pcl разработанный hewlett packard pcl изначально нацеливался на иные задачи чем postscript управление принтером не описание страницы не может обеспечивать переносимость однако для офисного использования он ряде случаев более удобен pcl использует стандартные windows шрифты truetype отличие от postscript кроме того последняя его версия pcl разрабатывалась hp тесном сотрудничестве microsoft потому обеспечивает ускоренный возврат ответа приложение быструю печать сложных графических изображений улучшенное качество печати повышенную точность при выводе документов кроме того язык postscript предполагает лицензирование выплату лицензионных отчислений adobe каждого контроллера rip raster image processor то время как язык pcl может использоваться сторонними производителями бесплатно поэтому настоящее время лицензированные rip postscript для плоттеров производства hp стоят около долларов то время как контроллеры эмуляция ps производства oki стоят долларов результате если десять лет назад практически все лазерные принтеры поддерживали postscript качестве основного языка то настоящее время множество лазерных принтеров класса soho не оснащается поддержкой postscript целью удешевления таким образом postscript вытесняется из офисов языком pcl оставаясь тем не менее практически стандартом области допечатной подготовки примечания ссылки http postscript vk narod ru книга на русском языке описанием основных команд языка postscript конкретными примерами программ http psdraw narod ru русский сайт языке технологии postscript the history of postscript history of postscript first guide to postscript postscript language reference rd ed published by addison wesley isbn postscript language tutorial and cookbook glenn reid thinking in postscript addison wesley немнюгин чаунин комолкин эффективная работа unix спб питер isbn романовский иосиф владимирович столяр сергей ефимович стеки стековые языки учебное пособие спб издательство цпо информатизация образования postscript или pdf англ языки pcl postscript postscript language document structuring conventions specification version september halftones and screens adobe developers association october категория языки разметки категория векторная графика категория конкатенативные языки категория стековые языки категория предметно ориентированные языки категория языки описания страниц категория семейство языков форт